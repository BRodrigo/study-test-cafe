!function P(F,e){var j=F.document;!function(a){"use strict";var d,h,o,p,m,i={".js":[],".json":[],".css":[],".html":[]},u="function"==typeof require?require:null;return p=function(e){var t=new Error("Could not find module '"+e+"'");return t.code="MODULE_NOT_FOUND",t},m=function(e,t,n){var r,o;if("function"==typeof e[t+n])return t+n;for(r=0;o=i[n][r];++r)if("function"==typeof e[t+o])return t+o;return null},d=function(e,t,n,r,o,i){var s,l,a,u,c,f;for("."!==(s=(n=n.split(/[\\/]/)).pop())&&".."!==s||(n.push(s),s="");null!=(l=n.shift());)if(l&&"."!==l&&(".."===l?(e=t.pop(),i=i.slice(0,i.lastIndexOf("/"))):(t.push(e),e=e[l],i+="/"+l),!e))throw p(r);if(s&&"function"!=typeof e[s]&&((f=m(e,s,".js"))||(f=m(e,s,".json")),f||(f=m(e,s,".css")),f||(f=m(e,s,".html")),f?s=f:2!==o&&"object"==typeof e[s]&&(t.push(e),e=e[s],i+="/"+s,s="")),!s)return 1!==o&&e[":mainpath:"]?d(e,t,e[":mainpath:"],r,1,i):d(e,t,"index",r,2,i);if(!(c=e[s]))throw p(r);return c.hasOwnProperty("module")?c.module.exports:(a={},c.module=u={exports:a,id:i+"/"+s},c.call(a,a,u,h(e,t,i)),u.exports)},o=function(e,t,n,r){var o,i=n,s=n.charAt(0),l=0;if("/"===s){if(i=i.slice(1),!(e=a["/"])){if(u)return u(n);throw p(n)}r="/",t=[]}else if("."!==s){if(o=i.split("/",1)[0],!(e=a[o])){if(u)return u(n);throw p(n)}r=o,t=[],(i=i.slice(o.length+1))||(l=(i=e[":mainpath:"])?1:(i="index",2))}return d(e,t,i,n,l,r)},(h=function(t,n,r){return function(e){return o(t,[].concat(n),e,r)}})(a,[],"")}({"testcafe-release":{src:{client:{automation:{"cursor.js":function(e,t,n){e.__esModule=!0;var r=i(n("./deps/testcafe-core")),o=i(n("./deps/testcafe-ui"));function i(e){return e&&e.__esModule?e:{default:e}}var s=r.default.domUtils,l=F.top===F?o.default.cursorUI:o.default.iframeCursorUI;e.default={x:-1,y:-1,currentActiveWindow:F.top,_ensureActiveWindow:function(){if(this.currentActiveWindow!==F&&this.currentActiveWindow!==F.parent){var e=s.findIframeByWindow(this.currentActiveWindow);e&&s.isElementInDocument(e)||(this.currentActiveWindow=F)}},get active(){return this._ensureActiveWindow(),this.currentActiveWindow===F},set activeWindow(e){this.currentActiveWindow=e},get activeWindow(){return this._ensureActiveWindow(),this.currentActiveWindow},get position(){return{x:this.x,y:this.y}},get visible(){return F.top===F&&l.isVisible()},move:function(e,t){return this.x=e,this.y=t,l.move(this.x,this.y)},hide:function(){this.visible&&l.hide()},show:function(){F.top===F&&l.show()},leftButtonDown:function(){return l.leftButtonDown()},rightButtonDown:function(){return l.rightButtonDown()},buttonUp:function(){return l.buttonUp()}},t.exports=e.default},deps:{"hammerhead.js":function(e,t,n){e.__esModule=!0,e.default=F["%hammerhead%"],t.exports=e.default},"testcafe-core.js":function(e,t,n){e.__esModule=!0,e.default=F["%testCafeCore%"],t.exports=e.default},"testcafe-ui.js":function(e,t,n){e.__esModule=!0,e.default=F["%testCafeUI%"],t.exports=e.default}},"errors.js":function(e,t,n){e.__esModule=!0,e.default={elementIsInvisibleError:"elementIsInvisibleError",foundElementIsNotTarget:"foundElementIsNotTarget"},t.exports=e.default},"get-element.js":function(e,t,n){e.__esModule=!0,e.fromPoint=E,e.underCursor=function(){var e=s.default.position;return E(e.x,e.y).then(function(e){var t=e.element;return t})};var r=l(n("./deps/hammerhead")),o=l(n("./deps/testcafe-core")),i=l(n("./deps/testcafe-ui")),s=l(n("./cursor"));function l(e){return e&&e.__esModule?e:{default:e}}var a=r.default.utils.browser,u=r.default.Promise,c=r.default.nativeMethods,f=o.default.positionUtils,d=o.default.domUtils;function h(e,t,n){var r=null;return i.default.hide(n).then(function(){return r=f.getElementFromPoint(e,t),i.default.show(n)}).then(function(){return r})}function p(e,t,n){var r=f.getElementFromPoint(e,t),o=d.containsElement(n,r)&&c.nodeTextContentGetter.call(r).length;return r&&r===n||o?r:null}function m(e,t){if(!t||!d.isDomElement(t)||!e||e===t)return e;if("tref"===d.getTagName(t))return t;var n="area"===d.getTagName(t)&&d.isImgElement(e);if(a.isFirefox&&n)return function(e,t){var n=d.closest(t,"map");return n&&n.name===e.useMap.substring(1)?t:e}(e,t);var r=d.isAnchorElement(t)||d.getParents(t,"a").length,o=r&&d.containsElement(t,e)&&c.nodeTextContentGetter.call(e).length;if(!r||o||!c.nodeTextContentGetter.call(t).length)return e;var i=t.getBoundingClientRect();return p(i.right-1,i.top+1,t)||p(i.left+1,i.bottom-1,t)||e}function E(n,r,o){var i=F!==F.top,s=null;return h(n,r).then(function(e){s=e;var t=u.resolve(e);return!s&&i&&0<n&&0<r&&(t=t.then(function(){return h(n,r,!0)}).then(function(e){return s=e})),t.then(function(e){return m(e,o)}).then(function(e){return{element:e,corrected:e!==s}})})}},"index.js":function(e,t,n){var r=A(n("./deps/hammerhead")),o=A(n("./playback/scroll")),i=A(n("./playback/click")),s=A(n("./playback/click/select-child")),l=A(n("./playback/dblclick")),a=A(n("./playback/drag/to-offset")),u=A(n("./playback/drag/to-element")),c=A(n("./playback/hover")),f=A(n("./playback/press")),d=A(n("./playback/rclick")),h=A(n("./playback/select/select-text")),p=A(n("./playback/select/select-editable-content")),m=A(n("./playback/type")),E=A(n("./playback/upload")),g=n("../../test-run/commands/options"),v=A(n("./settings")),y=n("./utils/offsets"),S=n("./playback/press/utils"),b=A(n("./playback/select/calculate-select-text-arguments")),_=A(n("./errors")),T=A(n("./cursor"));function A(e){return e&&e.__esModule?e:{default:e}}e.Scroll=o.default,e.Click=i.default,e.SelectChildClick=s.default,e.DblClick=l.default,e.DragToOffset=a.default,e.DragToElement=u.default,e.Hover=c.default,e.Press=f.default,e.RClick=d.default,e.SelectText=h.default,e.SelectEditableContent=p.default,e.Type=m.default,e.Upload=E.default,e.MouseOptions=g.MouseOptions,e.ClickOptions=g.ClickOptions,e.TypeOptions=g.TypeOptions,e.ERROR_TYPES=_.default,e.AutomationSettings=v.default,e.getOffsetOptions=y.getOffsetOptions,e.calculateSelectTextArguments=b.default,e.cursor=T.default,e.getNextFocusableElement=S.getNextFocusableElement,e.get=n;var x=r.default.nativeMethods,w=r.default.EVENTS.evalIframeScript;x.objectDefineProperty(F,"%testCafeAutomation%",{configurable:!0,value:e}),r.default.on(w,function(e){return P(x.contentWindowGetter.call(e.iframe),!0)})},playback:{click:{"index.js":function(e,t,n){e.__esModule=!0;var r=c(n("../../deps/hammerhead")),o=c(n("../../deps/testcafe-core")),i=c(n("../../deps/testcafe-ui")),s=c(n("../visible-element-automation")),l=n("../../utils/utils"),a=c(n("../../cursor")),u=c(n("../../utils/next-tick"));function c(e){return e&&e.__esModule?e:{default:e}}var f=r.default.Promise,d=r.default.utils.extend,h=r.default.utils.browser,p=r.default.utils.featureDetection,m=r.default.eventSandbox.eventSimulator,E=o.default.domUtils,g=o.default.styleUtils,v=o.default.eventUtils,y=o.default.arrayUtils,S=o.default.delay,b=i.default.selectElement,_=function(r){function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e,t));return n.modifiers=t.modifiers,n.caretPos=t.caretPos,n.targetElementParentNodes=[],n.activeElementBeforeMouseDown=null,n.mouseDownElement=null,n.eventState={mousedownPrevented:!1,blurRaised:!1,simulateDefaultBehavior:!0,clickElement:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,r),o.prototype._bindMousedownHandler=function(){var n=this;v.bind(this.element,"mousedown",function e(t){n.eventState.mousedownPrevented=t.defaultPrevented,v.preventDefault(t),v.unbind(n.element,"mousedown",e)})},o.prototype._bindBlurHandler=function(t){var n=this;v.bind(t,"blur",function e(){n.eventState.blurRaised=!0,v.unbind(t,"blur",e,!0)},!0)},o.prototype._bindClickHandler=function(n){v.bind(n,"click",function e(t){v.preventDefault(t,!0),v.unbind(n,"click",e)})},o.prototype._raiseTouchEvents=function(e){p.isTouchDevice&&(m.touchstart(e.element,e.options),m.touchend(e.element,e.options))},o.prototype._mousedown=function(n){var r=this;return this.targetElementParentNodes=E.getParents(n.element),this.mouseDownElement=n.element,a.default.leftButtonDown().then(function(){r._raiseTouchEvents(n);var e=E.getActiveElement();r.activeElementBeforeMouseDown=e;var t=(h.isWebKit||h.isIE)&&E.isSelectElement(r.mouseDownElement);return t&&r._bindMousedownHandler(),r._bindBlurHandler(e),r.eventState.simulateDefaultBehavior=m.mousedown(n.element,n.options),!1===r.eventState.simulateDefaultBehavior&&(r.eventState.simulateDefaultBehavior=t&&!r.eventState.mousedownPrevented),r._ensureActiveElementBlur(e)}).then(function(){return r._focus(n)})},o.prototype._ensureActiveElementBlur=function(t){var n=this;return new f(function(e){E.getActiveElement()===t||n.eventState.blurRaised?e():h.isIE&&h.version<12?(0,u.default)().then(function(){n.eventState.blurRaised||m.blur(t),e()}):(m.blur(t),e())})},o.prototype._focus=function(e){if(!1===this.eventState.simulateDefaultBehavior)return f.resolve();var t=E.isContentEditableElement(this.element)?this.element:e.element,n=!h.isIE||this.activeElementBeforeMouseDown===E.getActiveElement();return(0,l.focusAndSetSelection)(t,n,this.caretPos)},o._getElementForClick=function(e,t,n){var r=E.getParents(t),o=E.isTheSameNode(t,e);return h.isFirefox?o?e:null:o?y.equals(n,r)?e:null:e.contains(t)&&!E.isEditableFormElement(t)?e:t.contains(e)?t:y.getCommonElement(r,n)},o.prototype._mouseup=function(t){var n=this;return a.default.buttonUp().then(function(){return n._getElementForEvent(t)}).then(function(e){t.element=e,n.eventState.clickElement=o._getElementForClick(n.mouseDownElement,e,n.targetElementParentNodes),m.mouseup(e,t.options)})},o.prototype._click=function(e){if(E.isOptionElement(e.element))return e.element;if(this.eventState.clickElement){var t=E.isInputElement(this.eventState.clickElement)&&"color"===this.eventState.clickElement.type;h.isFirefox&&t&&this._bindClickHandler(this.eventState.clickElement),m.click(this.eventState.clickElement,e.options)}return E.isElementFocusable(e.element)||(0,l.focusByRelatedElement)(e.element),E.isSelectElement(e.element)&&1===g.getSelectElementSize(e.element)&&!1!==this.eventState.simulateDefaultBehavior&&(b.isOptionListExpanded(e.element)?b.collapseOptionList():b.expandOptionList(e.element)),e},o.prototype.run=function(e){var i=this,s=null;return this._ensureElement(e).then(function(e){var t=e.element,n=e.clientPoint,r=e.screenPoint,o=e.devicePoint;return s={point:n,screenPoint:r,element:t,options:d({clientX:n.x,clientY:n.y,screenX:o.x,screenY:o.y},i.modifiers)},f.all([S(i.automationSettings.mouseActionStepDelay),i._mousedown(s)])}).then(function(){return i._mouseup(s)}).then(function(){return i._click(s)})},o}(s.default);e.default=_,t.exports=e.default},"select-child.js":function(e,t,n){e.__esModule=!0;var r=s(n("../../deps/hammerhead")),o=s(n("../../deps/testcafe-core")),i=s(n("../../deps/testcafe-ui")),l=s(n("../move")),a=n("../../../../test-run/commands/options"),u=n("../../utils/offsets"),c=s(n("../../settings"));function s(e){return e&&e.__esModule?e:{default:e}}var f=r.default.Promise,d=r.default.utils.browser,h=r.default.utils.featureDetection,p=r.default.eventSandbox.eventSimulator,m=r.default.eventSandbox.focusBlur,E=o.default.domUtils,g=o.default.styleUtils,v=o.default.delay,y=i.default.selectElement,S=h.isTouchDevice?0:160,b=function(){function s(e,t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.element=e,this.modifiers=t.modifiers,this.caretPos=t.caretPos,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this.speed=t.speed,this.automationSettings=new c.default(t.speed),this.parentSelect=E.getSelectParent(this.element),this.optionListExpanded=!!this.parentSelect&&y.isOptionListExpanded(this.parentSelect),this.childIndex=null,this.clickCausesChange=!1,this.parentSelect){var n=E.isOptionElement(this.element),r=this.parentSelect.selectedIndex;this.childIndex=E.getElementIndexInParent(this.parentSelect,this.element);var o=E.isOptionGroupElement(this.element.parentNode)?this.element.parentNode:null,i=this.element.disabled||o&&o.disabled;this.clickCausesChange=n&&!i&&this.childIndex!==r}this.eventsArgs={options:this.modifiers,element:this.element}}return s.prototype._calculateEventArguments=function(){var e=this.optionListExpanded?y.getEmulatedChildElement(this.element):this.element,t=1<g.getSelectElementSize(this.parentSelect);return{options:this.modifiers,element:d.isIE&&t?this.parentSelect:e}},s.prototype._getMoveArguments=function(){var e=null,t=null,n=null;if(this.optionListExpanded){e=y.getEmulatedChildElement(this.element);var r=(0,u.getDefaultAutomationOffsets)(e);t=r.offsetX,n=r.offsetY}else{e=j.documentElement;var o=y.getSelectChildCenter(this.element);t=o.x,n=o.y}return{element:e,offsetX:t,offsetY:n,speed:this.speed}},s.prototype._move=function(e){var t=this,n=e.element,r=e.offsetX,o=e.offsetY,i=e.speed,s=new a.MoveOptions({offsetX:r,offsetY:o,speed:i,modifiers:this.modifiers},!1);return new l.default(n,s).run().then(function(){return v(t.automationSettings.mouseActionStepDelay)})},s.prototype._mousedown=function(){var e=this;return d.isFirefox?(p.mousedown(this.eventsArgs.element,this.eventsArgs.options),this.clickCausesChange&&(this.parentSelect.selectedIndex=this.childIndex),this._focus()):d.isIE?(p.mousedown(this.eventsArgs.element,this.eventsArgs.options),this._focus()):this._focus().then(function(){return v(S)}).then(function(){p.mousedown(e.eventsArgs.element,e.eventsArgs.options),e.clickCausesChange&&(e.parentSelect.selectedIndex=e.childIndex)})},s.prototype._focus=function(){var t=this;return new f(function(e){m.focus(t.parentSelect,e,!1,!0)})},s.prototype._mouseup=function(){var e=d.isIE?this.parentSelect:this.eventsArgs.element;p.mouseup(e,this.eventsArgs.options),d.isIE&&this.clickCausesChange&&(this.parentSelect.selectedIndex=this.childIndex);var t=d.isFirefox||d.isSafari||d.isChrome&&53<=d.version,n=t||d.isIE;return t&&this.clickCausesChange&&p.input(this.parentSelect),n&&this.clickCausesChange&&p.change(this.parentSelect),f.resolve()},s.prototype._click=function(){p.click(this.eventsArgs.element,this.eventsArgs.options)},s.prototype.run=function(){var e=this;if(!this.parentSelect)return p.click(this.eventsArgs.element,this.eventsArgs.options),f.resolve();this.optionListExpanded||y.scrollOptionListByChild(this.element);var t=this._getMoveArguments();return this.eventsArgs=this._calculateEventArguments(),g.getSelectElementSize(this.parentSelect)<=1?this._move(t).then(function(){return e._click()}):this._move(t).then(function(){return e._mousedown()}).then(function(){return e._mouseup()}).then(function(){return e._click()})},s}();e.default=b,t.exports=e.default}},"dblclick.js":function(e,t,n){e.__esModule=!0;var r=u(n("../deps/hammerhead")),o=u(n("../deps/testcafe-core")),i=n("../../../test-run/commands/options"),s=u(n("./visible-element-automation")),l=u(n("./click")),a=u(n("../settings"));function u(e){return e&&e.__esModule?e:{default:e}}var c=r.default.utils.featureDetection,f=r.default.utils.browser,d=r.default.eventSandbox.eventSimulator,h=o.default.eventUtils,p=o.default.delay,m=c.isTouchDevice?0:160,E=function(r){function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e,t));return n.modifiers=t.modifiers,n.caretPos=t.caretPos,n.speed=t.speed,n.automationSettings=new a.default(n.speed),n.offsetX=t.offsetX,n.offsetY=t.offsetY,n.eventArgs=null,n.eventState={dblClickElement:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,r),o.prototype._firstClick=function(e){var t=this,n=new i.ClickOptions(this.options);n.speed=1;var r=new l.default(this.element,n);return r.on(r.TARGET_ELEMENT_FOUND_EVENT,function(e){return t.emit(t.TARGET_ELEMENT_FOUND_EVENT,e)}),r.run(e).then(function(e){return p(m).then(function(){return e})})},o.prototype._secondClick=function(e){var t=this;f.isIE&&h.bind(j,"focus",h.preventDefault,!0);var n=new i.ClickOptions({offsetX:e.screenPoint.x,offsetY:e.screenPoint.y,caretPos:this.caretPos,modifiers:this.modifiers,speed:1}),r=new l.default(j.documentElement,n);return r.run().then(function(e){return t.eventState.dblClickElement=r.eventState.clickElement,f.isIE&&h.unbind(j,"focus",h.preventDefault,!0),e})},o.prototype._dblClick=function(e){this.eventState.dblClickElement&&d.dblclick(this.eventState.dblClickElement,e.options)},o.prototype.run=function(e){var t=this;return this._firstClick(e).then(function(e){return t._secondClick(e)}).then(function(e){return t._dblClick(e)})},o}(s.default);e.default=E,t.exports=e.default},drag:{"base.js":function(e,t,n){e.__esModule=!0;var r=i(n("../../deps/hammerhead")),s=n("../../deps/testcafe-core"),l=n("../../get-element"),o=i(n("../visible-element-automation")),a=i(n("../move")),u=n("../../../../test-run/commands/options"),c=i(n("../../cursor"));function i(e){return e&&e.__esModule?e:{default:e}}var f=r.default.Promise,d=r.default.utils.extend,h=r.default.utils.featureDetection,p=r.default.eventSandbox.eventSimulator,m=r.default.eventSandbox.focusBlur,E=function(r){function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e,t));return n.modifiers=t.modifiers,n.speed=t.speed,n.offsetX=t.offsetX,n.offsetY=t.offsetY,n.endPoint=null,n.simulateDefaultBehavior=!0,n.downEvent=h.isTouchDevice?"touchstart":"mousedown",n.upEvent=h.isTouchDevice?"touchend":"mouseup",n.dragAndDropState=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,r),o.prototype._getEndPoint=function(){throw new Error("Not implemented")},o.prototype._mousedown=function(e){var t=this;return c.default.leftButtonDown().then(function(){return t.simulateDefaultBehavior=p[t.downEvent](e.element,e.options),t._focus(e)})},o.prototype._focus=function(n){var r=this;return new f(function(e){var t=s.domUtils.isContentEditableElement(r.element)?s.contentEditable.findContentEditableParent(r.element):n.element;m.focus(t,e,!1,!0)})},o.prototype._getDestination=function(){throw new Error("Not implemented")},o.prototype._drag=function(){var t=this,e=this._getDestination(),n=e.element,r=e.offsets,o=e.endPoint;this.endPoint=o;var i=new u.MoveOptions({offsetX:r.offsetX,offsetY:r.offsetY,modifiers:this.modifiers,speed:this.speed,minMovingTime:25,holdLeftButton:!0,skipDefaultDragBehavior:!1===this.simulateDefaultBehavior},!1);return new a.default(n,i).run().then(function(e){return t.dragAndDropState=e,(0,s.delay)(t.automationSettings.mouseActionStepDelay)})},o.prototype._mouseup=function(){var i=this;return c.default.buttonUp().then(function(){var n=s.positionUtils.offsetToClientCoords(i.endPoint),r=null,o=d({clientX:n.x,clientY:n.y},i.modifiers);return(0,l.fromPoint)(n.x,n.y).then(function(e){var t=e.element;return(r=t)?(i.dragAndDropState.enabled?(o.dataTransfer=i.dragAndDropState.dataTransfer,i.dragAndDropState.dropAllowed&&p.drop(r,o),p.dragend(i.dragAndDropState.element,o),i.dragAndDropState.dataStore.setProtectedMode()):p[i.upEvent](r,o),(0,l.fromPoint)(n.x,n.y)):r}).then(function(e){var t=e.element;r&&t===r&&!i.dragAndDropState.enabled&&p.click(r,o)})})},o.prototype.run=function(e){var r=this,o=null;return this._ensureElement(e).then(function(e){var t=e.element,n=e.clientPoint;return o={point:n,element:t,options:d({clientX:n.x,clientY:n.y},r.modifiers)},f.all([(0,s.delay)(r.automationSettings.mouseActionStepDelay),r._mousedown(o)])}).then(function(){return r._drag()}).then(function(){return r._mouseup()})},o}(o.default);e.default=E,t.exports=e.default},"drag-and-drop-state.js":function(e,t,n){e.__esModule=!0,e.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.enabled=!1,this.dropAllowed=!1,this.element=null,this.dataTransfer=null,this.dataStore=null},t.exports=e.default},"to-element.js":function(e,t,n){e.__esModule=!0;var r=i(n("../../deps/testcafe-core")),o=i(n("./base")),s=n("../../utils/offsets");function i(e){return e&&e.__esModule?e:{default:e}}var l=r.default.positionUtils,a=function(o){function i(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,e,n));return r.destinationElement=t,r.destinationOffsetX=n.destinationOffsetX,r.destinationOffsetY=n.destinationOffsetY,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,o),i.prototype._getDestination=function(){var e=this.destinationElement,t=l.getElementRectangle(e),n=(0,s.getOffsetOptions)(e,this.destinationOffsetX,this.destinationOffsetY);return{element:e,offsets:n,endPoint:{x:t.left+n.offsetX,y:t.top+n.offsetY}}},i}(o.default);e.default=a,t.exports=e.default},"to-offset.js":function(e,t,n){e.__esModule=!0;var r=i(n("../../deps/testcafe-core")),o=i(n("./base")),l=i(n("../../utils/get-automation-point"));function i(e){return e&&e.__esModule?e:{default:e}}var a=r.default.styleUtils,s=function(i){function s(e,t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,i.call(this,e,r));return o.dragOffsetX=t,o.dragOffsetY=n,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,i),s.prototype._getDestination=function(){var e=(0,l.default)(this.element,this.offsetX,this.offsetY),t=a.getWidth(j),n=a.getHeight(j),r={x:e.x+this.dragOffsetX,y:e.y+this.dragOffsetY};return r={x:Math.min(Math.max(0,r.x),t),y:Math.min(Math.max(0,r.y),n)},{element:j.documentElement,offsets:{offsetX:r.x,offsetY:r.y},endPoint:r}},s}(o.default);e.default=s,t.exports=e.default}},"hover.js":function(e,t,n){e.__esModule=!0;var r,o=n("./visible-element-automation"),i=function(n){function r(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r.prototype.run=function(e){return this._ensureElement(e,!0)},r}(((r=o)&&r.__esModule?r:{default:r}).default);e.default=i,t.exports=e.default},move:{"event-sequence":{"base.js":function(e,t,n){e.__esModule=!0;var r,o=n("../../../deps/hammerhead"),i=(r=o)&&r.__esModule?r:{default:r},d=n("../../../deps/testcafe-core"),h=i.default.utils.browser,s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dragAndDropMode=!1,this.dropAllowed=!1}return e.prototype.setup=function(){this.dragAndDropMode=!1,this.dropAllowed=!1},e.prototype.leaveElement=function(){},e.prototype.move=function(){},e.prototype.enterElement=function(){},e.prototype.dragAndDrop=function(){},e.prototype.teardown=function(){},e.prototype.run=function(e,t,n,r,o,i){var s=t&&d.domUtils.isElementInDocument(t),l=t&&d.domUtils.isElementInIframe(t)&&!d.domUtils.getIframeByElement(t);s&&!l||(t=null);var a=e!==t,u=a?d.domUtils.getCommonAncestor(e,t):null;this.setup(),a&&t&&this.leaveElement(e,t,u,n),h.isIE&&this.move(e,n,r),a&&d.domUtils.isElementInDocument(e)&&this.enterElement(e,t,u,n),h.isIE||this.move(e,n,r),this.dragAndDrop(o,e,t,n,i),this.teardown(e,n,t,r);var c=this.dragAndDropMode,f=this.dropAllowed;return this.dragAndDropMode=!1,this.dropAllowed=!1,{dragAndDropMode:c,dropAllowed:f}},e}();e.default=s,t.exports=e.default},"drag-and-drop-first-move.js":function(e,t,n){e.__esModule=!0;var r=s(n("../../../deps/hammerhead")),o=s(n("./base")),i=s(n("./index")),l=s(n("./drag-and-drop-move"));function s(e){return e&&e.__esModule?e:{default:e}}var a=r.default.eventSandbox.eventSimulator,u=function(s){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,s.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,s),e.prototype.setup=function(){s.prototype.setup.call(this),this.dragAndDropMode=!0},e.prototype.leaveElement=function(){i.default.leaveElement.apply(this,arguments)},e.prototype.move=function(){i.default.move.apply(this,arguments)},e.prototype.enterElement=function(){i.default.enterElement.apply(this,arguments)},e.prototype.dragAndDrop=function(e,t,n,r,o){var i=a.dragstart(e,r);o.setReadOnlyMode(),i?l.default.dragAndDrop.apply(this,arguments):this.dragAndDropMode=!1},e.prototype.run=function(e,t,n,r,o,i){return s.prototype.run.call(this,e,null,n,r,o,i)},e}(o.default);e.default=new u,t.exports=e.default},"drag-and-drop-move.js":function(e,t,n){e.__esModule=!0;var r=s(n("../../../deps/hammerhead")),o=n("../../../deps/testcafe-core"),i=s(n("./base"));function s(e){return e&&e.__esModule?e:{default:e}}var l=r.default.eventSandbox.eventSimulator,a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.setup=function(){e.prototype.setup.call(this),this.dragAndDropMode=!0},t.prototype.dragAndDrop=function(e,t,n,r){l.drag(e,r),t!==n&&(o.domUtils.isElementInDocument(t)&&(r.relatedTarget=n,l.dragenter(t,r)),n&&(r.relatedTarget=t,l.dragleave(n,r))),this.dropAllowed=!l.dragover(t,r)},t}(i.default);e.default=new a,t.exports=e.default},"index.js":function(e,t,n){e.__esModule=!0;var r=s(n("../../../deps/hammerhead")),o=n("../../../deps/testcafe-core"),i=s(n("./base"));function s(e){return e&&e.__esModule?e:{default:e}}var l=r.default.eventSandbox.eventSimulator,a=r.default.utils.extend,u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.leaveElement=function(e,t,n,r){l.mouseout(t,a({relatedTarget:e},r));for(var o=t;o&&o!==n;)l.mouseleave(o,a({relatedTarget:e},r)),o=o.parentNode},t.prototype.move=function(e,t,n){l[n](e,t)},t.prototype.enterElement=function(e,t,n,r){l.mouseover(e,a({relatedTarget:t},r));for(var o=e,i=[];o&&o!==n;)i.push(o),o=o.parentNode;i.reverse();for(var s=0;s<i.length;s++)l.mouseenter(i[s],a({relatedTarget:t},r))},t.prototype.teardown=function(e,t,n,r){o.domUtils.isElementInDocument(e)&&e!==n&&l[r](e,t)},t}(i.default);e.default=new u,t.exports=e.default}},"index.js":function(e,t,n){e.__esModule=!0;var r=h(n("../../deps/hammerhead")),o=h(n("../../deps/testcafe-core")),p=n("../../../../test-run/commands/options"),i=h(n("../scroll")),m=h(n("../../cursor")),a=n("../../get-element"),s=h(n("../../utils/get-automation-point")),E=h(n("../../utils/get-line-rect-intersection")),l=h(n("../../utils/get-device-point")),u=h(n("../../utils/next-tick")),c=h(n("../../settings")),f=h(n("../drag/drag-and-drop-state")),d=h(n("./event-sequence")),g=h(n("./event-sequence/drag-and-drop-move")),v=h(n("./event-sequence/drag-and-drop-first-move"));function h(e){return e&&e.__esModule?e:{default:e}}var y=r.default.Promise,S=r.default.nativeMethods,b=r.default.utils.featureDetection,_=r.default.utils.html,T=r.default.utils.url,A=r.default.eventSandbox.eventSimulator,x=r.default.eventSandbox.message,w=r.default.eventSandbox.DataTransfer,P=r.default.eventSandbox.DragDataStore,C=o.default.positionUtils,O=o.default.domUtils,R=o.default.styleUtils,I=o.default.eventUtils,M=o.default.promiseUtils,U=o.default.sendRequestToFrame,N="automation|move|request",D="automation|move|response";x.on(x.SERVICE_MSG_RECEIVED_EVENT,function(e){e.message.cmd===N&&(e.source.parent===F?B.onMoveToIframeRequest(e):(r.default.on(r.default.EVENTS.beforeUnload,function(){return x.sendServiceMsg({cmd:D},e.source)}),B.onMoveOutRequest(e)))});var k=null,B=function(){function h(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),this.touchMode=b.isTouchDevice,this.moveEvent=this.touchMode?"touchmove":"mousemove",this.holdLeftButton=t.holdLeftButton,this.dragElement=null,this.dragAndDropState=new f.default,this.automationSettings=new c.default(t.speed);var n=h.getTarget(e,t.offsetX,t.offsetY);this.element=n.element,this.offsetX=n.offsetX,this.offsetY=n.offsetY,this.speed=t.speed,this.cursorSpeed=this.holdLeftButton?this.automationSettings.draggingSpeed:this.automationSettings.cursorSpeed,this.minMovingTime=t.minMovingTime||null,this.modifiers=t.modifiers||{},this.skipScrolling=t.skipScrolling,this.skipDefaultDragBehavior=t.skipDefaultDragBehavior,this.endPoint=null,this.movingTime=null,this.x=null,this.y=null,this.startTime=null,this.endTime=null,this.distanceX=null,this.distanceY=null,this.firstMovingStepOccured=!1}return h.getTarget=function(e,t,n){var r=!C.containsOffset(e,t,n),o=r?(0,s.default)(e,t,n):{x:t,y:n};return{element:r?j.documentElement:e,offsetX:o.x,offsetY:o.y}},h.onMoveToIframeRequest=function(e){var t={x:e.message.endX,y:e.message.endY},n=e.source,r=O.findIframeByWindow(n),o=R.getBordersWidth(r),i=R.getElementPadding(r),s=C.getIframeClientCoordinates(r),l=C.getIframePointRelativeToParentFrame(t,n),a=m.default.position,u=C.isInRectangle(a,s)?a:(0,E.default)(a,l,s),c={x:u.x-s.left,y:u.y-s.top},f=new h(r,new p.MoveOptions({modifiers:e.message.modifiers,offsetX:c.x+o.left+i.left,offsetY:c.y+o.top+i.top,speed:e.message.speed,skipScrolling:!0},!1)),d={cmd:D,x:c.x,y:c.y};m.default.activeWindow!==n?f.run().then(function(){m.default.activeWindow=n,x.sendServiceMsg(d,n)}):x.sendServiceMsg(d,n)},h.onMoveOutRequest=function(e){var t=e.source,n={left:e.message.left,right:e.message.right,top:e.message.top,bottom:e.message.bottom};if(!e.message.iframeUnderCursor){var r=e.message,o=r.startX,i=r.startY,s=o-n.left,l=i-n.top;return k&&(A.mouseout(k,{clientX:s,clientY:l,relatedTarget:null}),A.mouseleave(k,{clientX:s,clientY:l,relatedTarget:null})),void x.sendServiceMsg({cmd:D},t)}var a=m.default.position,u={x:n.left+a.x,y:n.top+a.y},c={x:e.message.endX,y:e.message.endY},f=(0,E.default)(u,c,n);if(f){var d=new p.MoveOptions({modifiers:e.message.modifiers,offsetX:f.x-n.left,offsetY:f.y-n.top,speed:e.message.speed,skipScrolling:!0},!1);new h(j.documentElement,d).run().then(function(){var e={cmd:D,x:f.x,y:f.y};m.default.activeWindow=t,x.sendServiceMsg(e,t)})}else x.sendServiceMsg({cmd:D,x:n.left,y:n.top},t)},h.prototype._getTargetClientPoint=function(){var e=R.getElementScroll(this.element);if(O.isHtmlElement(this.element))return{x:Math.floor(this.offsetX-e.left),y:Math.floor(this.offsetY-e.top)};var t=C.getClientPosition(this.element),n=this.element.tagName&&O.isBodyElement(this.element);return{x:Math.floor(n?t.x+this.offsetX:t.x+this.offsetX-e.left),y:Math.floor(n?t.y+this.offsetY:t.y+this.offsetY-e.top)}},h.prototype._emulateEvents=function(e){var t=this.holdLeftButton?I.BUTTONS_PARAMETER.leftButton:I.BUTTONS_PARAMETER.noButton,n=(0,l.default)({x:this.x,y:this.y}),r={clientX:this.x,clientY:this.y,screenX:n.x,screenY:n.y,buttons:t,ctrl:this.modifiers.ctrl,alt:this.modifiers.alt,shift:this.modifiers.shift,meta:this.modifiers.meta,dataTransfer:this.dragAndDropState.dataTransfer},o=(this.dragAndDropState.enabled?this.firstMovingStepOccured?g.default:v.default:d.default).run(e,k,r,this.moveEvent,this.dragElement,this.dragAndDropState.dataStore),i=o.dragAndDropMode,s=o.dropAllowed;this.firstMovingStepOccured=!0,this.dragAndDropState.enabled=i,this.dragAndDropState.dropAllowed=s,k=e},h.prototype._movingStep=function(){var n=this;if(this.touchMode&&!this.holdLeftButton)this.x=this.endPoint.x,this.y=this.endPoint.y;else if(this.startTime){var e=(Math.min(S.dateNow(),this.endTime)-this.startTime)/(this.endTime-this.startTime);this.x=Math.floor(this.startPoint.x+this.distanceX*e),this.y=Math.floor(this.startPoint.y+this.distanceY*e)}else this.startTime=S.dateNow(),this.endTime=this.startTime+this.movingTime,this.x+=0<this.distanceX?1:-1,this.y+=0<this.distanceY?1:-1;return m.default.move(this.x,this.y).then(a.underCursor).then(function(e){var t=n.holdLeftButton&&n.touchMode?n.dragElement:e;return t?n._emulateEvents(t):null}).then(u.default)},h.prototype._isMovingFinished=function(){return this.x===this.endPoint.x&&this.y===this.endPoint.y},h.prototype._move=function(){var e=this;return this.startPoint=m.default.position,this.x=this.startPoint.x,this.y=this.startPoint.y,this.distanceX=this.endPoint.x-this.startPoint.x,this.distanceY=this.endPoint.y-this.startPoint.y,this.movingTime=Math.max(Math.abs(this.distanceX),Math.abs(this.distanceY))/this.cursorSpeed,this.minMovingTime&&(this.movingTime=Math.max(this.movingTime,this.minMovingTime)),M.whilst(function(){return!e._isMovingFinished()},function(){return e._movingStep()})},h.prototype._scroll=function(){if(this.skipScrolling)return y.resolve();var e=new p.ScrollOptions({offsetX:this.offsetX,offsetY:this.offsetY},!1);return new i.default(this.element,e).run()},h.prototype._moveToCurrentFrame=function(){if(m.default.active)return y.resolve();var e=m.default.position,t=e.x,n=e.y,r=m.default.activeWindow,o=null,i=null,s=null,l={cmd:N,startX:t,startY:n,endX:this.endPoint.x,endY:this.endPoint.y,modifiers:this.modifiers,speed:this.speed};return r.parent===F&&(o=O.findIframeByWindow(r),s=C.getIframeClientCoordinates(o),l.left=s.left,l.top=s.top,l.right=s.right,l.bottom=s.bottom),(0,a.underCursor)().then(function(e){return i=e===o,r.parent===F&&(l.iframeUnderCursor=i),U(l,D,r)}).then(function(e){return m.default.activeWindow=F,i||F.top!==F?m.default.move(e.x,e.y):null})},h.prototype.run=function(){var l=this;return(0,a.underCursor)().then(function(e){l.dragElement=l.holdLeftButton?e:null;var t=function(e){for(var t=e;t;){if(t.draggable)return t;t=t.parentNode}return null}(l.dragElement);if(t&&b.hasDataTransfer&&!l.skipDefaultDragBehavior){l.dragAndDropState.enabled=!0,l.dragElement=t,l.dragAndDropState.element=l.dragElement,l.dragAndDropState.dataStore=new P,l.dragAndDropState.dataTransfer=new w(l.dragAndDropState.dataStore);var n=O.isAnchorElement(l.dragElement);if(n||O.isImgElement(l.dragElement)){var r=n?"href":"src",o=T.parseProxyUrl(l.dragElement[r]),i=o?o.destUrl:l.dragElement[r],s=_.cleanUpHtml(S.elementOuterHTMLGetter.call(l.dragElement));l.dragAndDropState.dataTransfer.setData("text/plain",i),l.dragAndDropState.dataTransfer.setData("text/uri-list",i),l.dragAndDropState.dataTransfer.setData("text/html",s)}}return l._scroll()}).then(function(){var e=l._getTargetClientPoint(),t=e.x,n=e.y,r=R.getWidth(F),o=R.getHeight(F);return 0<=t&&t<=r&&0<=n&&n<=o?(l.endPoint={x:t,y:n},l._moveToCurrentFrame().then(function(){return l._move()})):null}).then(function(){return l.dragAndDropState})},h}();e.default=B,t.exports=e.default}},press:{"index.js":function(e,t,n){e.__esModule=!0;var r=a(n("../../deps/hammerhead")),l=n("../../deps/testcafe-core"),i=a(n("./key-press-simulator")),u=a(n("./shortcuts")),s=n("./utils"),o=a(n("../../settings"));function a(e){return e&&e.__esModule?e:{default:e}}var c=r.default.Promise,f=r.default.utils.browser,d=r.default.eventSandbox.message,h=r.default.nativeMethods,p="automation|press|request",m="automation|press|response";d.on(d.SERVICE_MSG_RECEIVED_EVENT,function(e){e.message.cmd===p&&(r.default.on(r.default.EVENTS.beforeUnload,function(){return d.sendServiceMsg({cmd:m},e.source)}),new E(e.message.keyCombinations,e.message.options).run().then(function(){return d.sendServiceMsg({cmd:m},e.source)}))});var E=function(){function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.keyCombinations=e,this.isSelectElement=!1,this.pressedKeyString="",this.modifiersState=null,this.shortcutHandlers=null,this.topSameDomainDocument=l.domUtils.getTopSameDomainWindow(F).document,this.automationSettings=new o.default(t.speed),this.options=t}return a._getKeyPressSimulators=function(e){var t=(0,l.getKeyArray)(e),n=(0,s.getActualKeysAndEventKeyProperties)(t),r=n.actualKeys,o=n.eventKeyProperties;return l.arrayUtils.map(r,function(e,t){return new i.default(e,o[t])})},a._getShortcuts=function(e){for(var t=(0,l.getKeyArray)(e.toLowerCase()),n=[],r=[],o=[],i=0;i<t.length;i++)for(r.push(t[i]),o=r.slice();o.length;){var s=o.join("+");u.default[s]?(n.push(s),r=o=[]):o.shift()}return n},a._getShortcutHandlers=function(e){for(var t=a._getShortcuts(e.toLowerCase()),n={},r="",o=null,i=null,s=null,l=0;l<t.length;l++)o=t[l],i=e.indexOf(o),s=o.length,n[r+=e.substring(0,i+s)]=u.default[o],e=e.substring(i+s);return n},a.prototype._down=function(e){this.pressedKeyString+=(this.pressedKeyString?"+":"")+e.key;var t=!e.down(this.modifiersState);return c.resolve(t)},a.prototype._press=function(e,t){var n=this;if(t&&!this.isSelectElement)return(0,l.delay)(this.automationSettings.keyActionStepDelay);var r=this.shortcutHandlers[this.pressedKeyString],o=!1;return r&&!f.isFirefox&&"enter"!==e.key||(o=!e.press(this.modifiersState)),o&&!this.isSelectElement||!r?(0,l.delay)(this.automationSettings.keyActionStepDelay):r((0,s.getDeepActiveElement)(this.topSameDomainDocument)).then(function(){return(0,l.delay)(n.automationSettings.keyActionStepDelay)})},a.prototype._up=function(e){return e.up(this.modifiersState),(0,l.delay)(this.automationSettings.keyActionStepDelay)},a.prototype._runCombination=function(e){var n=this;this.modifiersState={ctrl:!1,alt:!1,shift:!1,meta:!1},this.isSelectElement=l.domUtils.isSelectElement((0,s.getDeepActiveElement)(this.topSameDomainDocument)),this.pressedKeyString="",this.shortcutHandlers=a._getShortcutHandlers(e);var t=a._getKeyPressSimulators(e);return l.promiseUtils.each(t,function(t){return n._down(t).then(function(e){return n._press(t,e)})}).then(function(){return l.arrayUtils.reverse(t),l.promiseUtils.each(t,function(e){return n._up(e)})})},a.prototype.run=function(){var t=this,e=l.domUtils.getActiveElement(),n=l.domUtils.isIframeElement(e);if(F.top===F&&n&&h.contentWindowGetter.call(e)){var r={cmd:p,keyCombinations:this.keyCombinations,options:this.options};return(0,l.sendRequestToFrame)(r,m,h.contentWindowGetter.call(e))}return l.promiseUtils.each(this.keyCombinations,function(e){return t._runCombination(e).then(function(){return(0,l.delay)(t.automationSettings.keyActionStepDelay)})})},a}();e.default=E,t.exports=e.default},"key-press-simulator.js":function(e,t,n){e.__esModule=!0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=c(n("../../deps/hammerhead")),f=n("../../deps/testcafe-core"),a=c(n("../type/type-text")),d=n("./utils"),i=c(n("../../utils/get-key-code")),s=c(n("../../utils/get-key-identifier")),l=c(n("../../utils/is-letter")),u=c(n("../../utils/get-key-properties"));function c(e){return e&&e.__esModule?e:{default:e}}var h=o.default.utils.browser,p=o.default.utils.extend,m=o.default.eventSandbox.eventSimulator,E=function(){function c(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this.isLetter=(0,l.default)(e),this.isChar=1===e.length||"space"===e,this.sanitizedKey=(0,f.getSanitizedKey)(e),this.modifierKeyCode=f.KEY_MAPS.modifiers[this.sanitizedKey],this.specialKeyCode=f.KEY_MAPS.specialKeys[this.sanitizedKey],this.keyCode=null,this.keyIdentifierProperty=(0,s.default)(t),this.topSameDomainDocument=f.domUtils.getTopSameDomainWindow(F).document,this.keyProperty=f.KEY_MAPS.keyProperty[t]||t,this.isChar&&"space"!==e?this.keyCode=(0,i.default)(this.sanitizedKey):this.modifierKeyCode?this.keyCode=this.modifierKeyCode:this.specialKeyCode&&(this.keyCode=this.specialKeyCode),this.storedActiveElement=null}return c._isKeyActivatedInputElement=function(e){return f.domUtils.isInputElement(e)&&/button|submit|reset|radio|checkbox/.test(e.type)},c.prototype._type=function(e,t){var n=e!==this.storedActiveElement,r=!n,o=e,i=f.domUtils.isEditableElement(e),s=f.domUtils.isEditableElement(this.storedActiveElement);try{if(n){var l=f.domUtils.isElementInIframe(e)===f.domUtils.isElementInIframe(this.storedActiveElement)||s;r=(!h.isFirefox||s)&&(!h.isWebKit||l)}}catch(e){}r&&(!h.isIE&&n&&s&&i&&(o=this.storedActiveElement),(0,a.default)(o,t))},c.prototype._addKeyPropertyToEventOptions=function(e){return p(e,(0,u.default)("keypress"===e.type,this.keyProperty,this.keyIdentifierProperty)),e},c.prototype.down=function(e){this.storedActiveElement=(0,d.getDeepActiveElement)(this.topSameDomainDocument),this.modifierKeyCode&&(e[this.sanitizedKey]=!0),e.shift&&this.isLetter&&(this.keyProperty=(0,d.changeLetterCase)(this.keyProperty));var t={keyCode:this.keyCode,type:"keydown"};return this._addKeyPropertyToEventOptions(t),m.keydown(this.storedActiveElement,p(t,e))},c.prototype.press=function(e){if(!this.isChar&&!this.specialKeyCode)return!0;var t=(0,d.getDeepActiveElement)(this.topSameDomainDocument),n=this.isChar?(0,d.getChar)(this.sanitizedKey,e.shift):null,r=this.specialKeyCode||n.charCodeAt(0),o=t!==this.storedActiveElement;if(h.isWebKit&&o&&f.domUtils.isElementInIframe(t)!==f.domUtils.isElementInIframe(this.storedActiveElement))return!0;this.storedActiveElement=t;var i={keyCode:r,charCode:r,type:"keypress"};this._addKeyPropertyToEventOptions(i);var s=h.isAndroid||m.keypress(t,p(i,e));if(!s)return s;t=(0,d.getDeepActiveElement)(this.topSameDomainDocument),!n||e.ctrl||e.alt||this._type(t,n);var l=c._isKeyActivatedInputElement(t),a=f.domUtils.isButtonElement(t),u=h.isSafari&&0<=h.compareVersions([h.webkitVersion,"603.1.30"]);return!h.isFirefox&&!u&&(l||a)&&"enter"===this.sanitizedKey&&t.click(),s},c.prototype.up=function(e){this.modifierKeyCode&&(e[this.sanitizedKey]=!1);var t={keyCode:this.keyCode,type:"keyup"};this._addKeyPropertyToEventOptions(t);var n=m.keyup((0,d.getDeepActiveElement)(this.topSameDomainDocument),p(t,e)),r=(0,d.getDeepActiveElement)(this.topSameDomainDocument);return!h.isFirefox&&!h.isSafari&&(!h.isChrome||53<=h.version)&&n&&"space"===this.sanitizedKey&&c._isKeyActivatedInputElement(r)&&r.click(),n},r(c,[{key:"key",get:function(){return this.sanitizedKey}}]),c}();e.default=E,t.exports=e.default},"shortcuts.js":function(e,t,n){e.__esModule=!0;var r=l(n("../../deps/hammerhead")),o=l(n("../../deps/testcafe-core")),i=l(n("../../deps/testcafe-ui")),s=n("./utils");function l(e){return e&&e.__esModule?e:{default:e}}var d=r.default.Promise,a=r.default.utils.browser,u=r.default.eventSandbox.eventSimulator,c=r.default.eventSandbox.elementEditingWatcher,h=o.default.textSelection,f=o.default.eventUtils,p=o.default.domUtils,m=i.default.selectElement,E=null,g=null;function v(){g=E=null,f.unbind(this,"blur",v,!0)}function y(e){p.isTextAreaElement(e)&&(E!==e&&(f.bind(e,"blur",v,!0),E=e),g=function(e){var t=h.hasInverseSelection(e),n=p.getTextAreaValue(e),r=t?h.getSelectionStart(e):h.getSelectionEnd(e);return n&&r?p.getTextareaIndentInLine(e,r):0}(e))}function S(e,t){var n=p.getTextAreaValue(e);if(n){var r=h.getSelectionStart(e),o=h.getSelectionEnd(e),i=h.hasInverseSelection(e),s=n.substring(0,i?r:o),l=s.lastIndexOf("\n"),a=s.substring(0,l);null!==g&&E===e||y(e),l=a.lastIndexOf("\n"),_(e,r,o,i,Math.min(l+1+g,a.length),t)}}function b(e,t){var n=p.getTextAreaValue(e);if(n){var r=h.getSelectionStart(e),o=h.getSelectionEnd(e),i=h.hasInverseSelection(e),s=i?r:o,l=n.substring(s),a=l.indexOf("\n"),u=-1===a?l.length:a+1,c=l.substring(u),f=s+u,d=-1===(a=c.indexOf("\n"))?c.length:a;null!==g&&E===e||y(e),_(e,r,o,i,f=Math.min(f+g,f+d),t)}}function _(e,t,n,r,o,i){var s=null,l=null;l=i?(s=t===n?t:r?n:t,o):s=o,h.select(e,s,l)}function T(e,t,n){p.isInputElement(e)&&"number"===e.type&&("-"===t.charAt(0)&&"."===t.charAt(1)&&(t=t.substring(1)),"."===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1))),p.setElementValue(e,t),h.select(e,n,n),u.input(e)}function A(e,t){if(p.isTextEditableElement(e)){var n=h.getSelectionStart(e),r=h.getSelectionEnd(e),o=h.hasInverseSelection(e),i=null,s=!p.isTextAreaElement(e)||p.getTextareaLineNumberByPosition(e,n)===p.getTextareaLineNumberByPosition(e,r);i=s?o?r:n:o?n:r;var l=p.getElementValue(e).substring(0,i).lastIndexOf("\n"),a=-1===l?0:l+1,u=null,c=null;s?(u=a,c=t?i:a,h.select(e,c,u)):o?h.select(e,r,a):h.select(e,n,a)}return d.resolve()}function x(e,t){if(p.isTextEditableElement(e)){var n=h.getSelectionStart(e),r=h.getSelectionEnd(e),o=h.hasInverseSelection(e),i=null,s=!p.isTextAreaElement(e)||p.getTextareaLineNumberByPosition(e,n)===p.getTextareaLineNumberByPosition(e,r);i=s?o?r:n:o?n:r;var l=p.getElementValue(e).substring(i),a=l.indexOf("\n"),u=i,c=null,f=null;u+=-1===a?l.length:a,s?(c=t?i:u,f=u,h.select(e,c,f)):o?h.select(e,r,u):h.select(e,n,u)}return d.resolve()}function w(e){return A(e,!0)}function P(e){return x(e,!0)}function C(e){return p.isRadioButtonElement(e)&&!a.isFirefox}function O(e,t){return R(e,t,!1).then(function(e){e&&(e.checked=!0)})}function R(e,t){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return e?(p.isSelectElement(e)&&m.collapseOptionList(),(0,s.focusNextElement)(e,t,n).then(function(e){return e&&p.isTextEditableInput(e)&&h.select(e),e})):d.resolve()}e.default={"ctrl+a":function(e){return p.isEditableElement(e)&&h.select(e),d.resolve()},backspace:function(e){if(p.isTextEditableElementAndEditingAllowed(e)){var t=h.getSelectionStart(e),n=h.getSelectionEnd(e),r=p.getElementValue(e).replace(/\r\n/g,"\n");n===t?0<t&&T(e,r.substring(0,t-1)+r.substring(n,r.length),t-1):T(e,r.substring(0,t)+r.substring(n,r.length),t)}return p.isContentEditableElement(e)&&h.deleteSelectionContents(e),d.resolve()},delete:function(e){if(p.isTextEditableElementAndEditingAllowed(e)){var t=h.getSelectionStart(e),n=h.getSelectionEnd(e),r=p.getElementValue(e).replace(/\r\n/g,"\n");n===t?t<r.length&&T(e,r.substring(0,t)+r.substring(n+1,r.length),t):T(e,r.substring(0,t)+r.substring(n,r.length),t)}return p.isContentEditableElement(e)&&h.deleteSelectionContents(e),d.resolve()},left:function(e){var t=null;if(p.isSelectElement(e)&&m.switchOptionsByKeys(e,"left"),C(e))return O(e,!0);if(p.isTextEditableElement(e)){var n=(t=h.getSelectionStart(e)||0)===h.getSelectionEnd(e)?t-1:t;h.select(e,n,n),y(e)}if(p.isContentEditableElement(e)&&(t=h.getSelectionStart(e))!==h.getSelectionEnd(e)){var r=h.getSelectionByElement(e),o=h.hasInverseSelectionContentEditable(e),i={node:o?r.focusNode:r.anchorNode,offset:o?r.focusOffset:r.anchorOffset};h.selectByNodesAndOffsets(i,i,!0)}return d.resolve()},right:function(e){var t=null,n=null;if(p.isSelectElement(e)&&m.switchOptionsByKeys(e,"right"),C(e))return O(e,!1);if(p.isTextEditableElement(e)){var r=(t=h.getSelectionStart(e))===(n=h.getSelectionEnd(e))?n+1:n;t===p.getElementValue(e).length&&(r=t),h.select(e,r,r),y(e)}if(p.isContentEditableElement(e)&&(t=h.getSelectionStart(e))!==(n=h.getSelectionEnd(e))){var o=h.getSelectionByElement(e),i=h.hasInverseSelectionContentEditable(e),s={node:i?o.anchorNode:o.focusNode,offset:i?o.anchorOffset:o.focusOffset};h.selectByNodesAndOffsets(s,s,!0)}return d.resolve()},up:function(e){return p.isSelectElement(e)&&m.switchOptionsByKeys(e,"up"),C(e)?O(e,!0):a.isWebKit&&p.isInputElement(e)?A(e):(p.isTextAreaElement(e)&&S(e,!1),d.resolve())},down:function(e){return p.isSelectElement(e)&&m.switchOptionsByKeys(e,"down"),C(e)?O(e,!1):a.isWebKit&&p.isInputElement(e)?x(e):(p.isTextAreaElement(e)&&b(e,!1),d.resolve())},"shift+left":function(e){if(p.isTextEditableElement(e)){var t=h.getSelectionStart(e),n=h.getSelectionEnd(e);t===n||h.hasInverseSelection(e)?h.select(e,n,Math.max(t-1,0)):h.select(e,t,Math.max(n-1,0)),y(e)}return d.resolve()},"shift+right":function(e){if(p.isTextEditableElement(e)){var t=h.getSelectionStart(e),n=h.getSelectionEnd(e),r=p.getElementValue(e).length;t!==n&&h.hasInverseSelection(e)?h.select(e,n,Math.min(t+1,r)):h.select(e,t,Math.min(n+1,r)),y(e)}return d.resolve()},"shift+up":function(e){return a.isWebKit&&p.isInputElement(e)?w(e):(p.isTextAreaElement(e)&&S(e,!0),d.resolve())},"shift+down":function(e){return a.isWebKit&&p.isInputElement(e)?P(e):(p.isTextAreaElement(e)&&b(e,!0),d.resolve())},"shift+home":w,"shift+end":P,home:A,end:x,enter:function(e){if(p.isSelectElement(e)&&m.collapseOptionList(),p.isInputElement(e)){a.isIE||c.processElementChanging(e);var t=p.getParents(e,"form")[0];t&&function(e,t){var n=e.querySelectorAll("input, button"),r=null,o=null;for(o=0;o<n.length;o++)if(!r&&"submit"===n[o].type&&!n[o].disabled){r=n[o];break}if(r)u.click(r);else if(p.blocksImplicitSubmission(t)){var i=e.getElementsByTagName("input"),s=[];for(o=0;o<i.length;o++)p.blocksImplicitSubmission(i[o])&&s.push(i[o]);1===s.length&&s[0]===t&&t.validity.valid&&u.submit(e)&&e.submit()}}(t,e)}else if(p.isTextAreaElement(e)){var n=h.getSelectionStart(e),r=p.getTextAreaValue(e),o=r.substring(0,n),i=r.substring(n),s=n+1;T(e,o+String.fromCharCode(10)+i,s)}else e.tagName&&p.isAnchorElement(e)&&u.click(e);return d.resolve()},tab:function(e){return R(e,!1)},"shift+tab":function(e){return R(e,!0)},esc:function(e){return p.isSelectElement(e)&&m.collapseOptionList(),d.resolve()}},t.exports=e.default},"utils.js":function(e,t,n){e.__esModule=!0,e.changeLetterCase=h,e.getActualKeysAndEventKeyProperties=function(e){for(var t=e.slice(),n=0;n<e.length;n++){var r=e[n];if("shift"===r.toLowerCase()){var o=e[n+1];if(!o)continue;l.KEY_MAPS.shiftMap[o]?e[n+1]=l.KEY_MAPS.shiftMap[o]:l.KEY_MAPS.reversedShiftMap[o]&&(t[n+1]=l.KEY_MAPS.reversedShiftMap[o])}!l.KEY_MAPS.shiftMap[r]||e[n-1]&&"shift"===e[n-1].toLowerCase()||(e[n]=l.KEY_MAPS.shiftMap[r],e.splice(n,0,"shift"),t.splice(n,0,"shift"),n++)}return{actualKeys:e,eventKeyProperties:t}},e.getChar=function(e,t){if("space"===e)return" ";if(t){if((0,o.default)(e))return h(e);if(l.KEY_MAPS.reversedShiftMap[e])return l.KEY_MAPS.reversedShiftMap[e]}return e},e.getDeepActiveElement=function e(t){var n=t||j,r=null,o=s.documentActiveElementGetter.call(n);if(o&&l.domUtils.isDomElement(o)||(o=n.body),o&&l.domUtils.isIframeElement(o)&&s.contentDocumentGetter.call(o))try{r=e(s.contentDocumentGetter.call(o))}catch(e){}return r||o},e.focusNextElement=function(n,r,o){return new d(function(e){var t=m(n,r,o);t?f.focus(t,function(){return e(t)}):e()})},e.getNextFocusableElement=m;var r=i(n("../../deps/hammerhead")),l=n("../../deps/testcafe-core"),o=i(n("../../utils/is-letter")),a=n("../../../core/utils/dom"),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("../../../core/utils/array"));function i(e){return e&&e.__esModule?e:{default:e}}var s=r.default.nativeMethods,c=r.default.utils.browser,f=r.default.eventSandbox.focusBlur,d=r.default.Promise;function h(e){return e===e.toLowerCase()?e.toUpperCase():e.toLowerCase()}function p(e,t,n){if(!(0,a.isRadioButtonElement)(t))return e;if(!n&&!t.name&&!c.isChrome)return[t];var r=function(t,e){var n=null;return e?""===t.name||c.isFirefox||(n=function(e){return!e.name||e===t||e.name!==t.name}):""!==t.name?n=function(e){return(0,a.isRadioButtonElement)(e)&&e.name===t.name}:c.isChrome&&(n=function(e){return(0,a.isRadioButtonElement)(e)&&!e.name}),n}(t,n);return r&&(e=u.filter(e,r)),e}function m(e,t,n){var r=t?-1:1,o=l.domUtils.getFocusableElements((0,a.findDocument)(e),!0);o=p(o,e,n);var i=(0,a.isRadioButtonElement)(e),s=u.indexOf(o,e);return(t?0===s:s===o.length-1)?n||!i?j.body:o[o.length-1-s]:t&&-1===s?o[o.length-1]:function(e,t,n){var r=(0,a.isRadioButtonElement)(t)&&t.name&&!t.checked,o=null;return n&&r&&(o=u.find(e,function(e){return(0,a.isRadioButtonElement)(e)&&e.name===t.name&&e.checked})),o||t}(o,o[s+r],n)}}},"rclick.js":function(e,t,n){e.__esModule=!0;var r=u(n("../deps/hammerhead")),o=u(n("../deps/testcafe-core")),i=u(n("./visible-element-automation")),s=n("../utils/utils"),l=u(n("../cursor")),a=u(n("../utils/next-tick"));function u(e){return e&&e.__esModule?e:{default:e}}var c=r.default.Promise,f=r.default.utils.extend,d=r.default.utils.browser,h=r.default.eventSandbox.eventSimulator,p=o.default.domUtils,m=o.default.eventUtils,E=o.default.delay,g=function(r){function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e,t));return n.modifiers=t.modifiers,n.caretPos=t.caretPos,n.eventState={simulateDefaultBehavior:!0,activeElementBeforeMouseDown:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,r),o.prototype._mousedown=function(e){var t=this;return l.default.rightButtonDown().then(function(){t.eventState.activeElementBeforeMouseDown=p.getActiveElement(),t.eventState.simulateDefaultBehavior=h.mousedown(e.element,e.options)}).then(function(){return t._focus(e)})},o.prototype._focus=function(e){if(!1===this.simulateDefaultBehavior)return(0,a.default)();var t=p.isContentEditableElement(this.element)?this.element:e.element,n=!d.isIE||this.eventState.activeElementBeforeMouseDown===p.getActiveElement();return(0,s.focusAndSetSelection)(t,n,this.caretPos).then(function(){return(0,a.default)()})},o.prototype._mouseup=function(t){var e=this;return l.default.buttonUp().then(function(){return e._getElementForEvent(t)}).then(function(e){return h.mouseup(e,t.options)})},o.prototype._contextmenu=function(t){return this._getElementForEvent(t).then(function(e){h.contextmenu(e,t.options),p.isElementFocusable(e)||(0,s.focusByRelatedElement)(e)})},o.prototype.run=function(e){var o=this,i=null;return this._ensureElement(e).then(function(e){var t=e.element,n=e.clientPoint,r=e.devicePoint;return i={point:n,element:t,options:f({clientX:n.x,clientY:n.y,screenX:r.x,screenY:r.y,button:m.BUTTON.right},o.modifiers)},c.all([E(o.automationSettings.mouseActionStepDelay),o._mousedown(i)])}).then(function(){return o._mouseup(i)}).then(function(){return o._contextmenu(i)})},o}(i.default);e.default=g,t.exports=e.default},"scroll.js":function(e,t,n){e.__esModule=!0;var r,o=n("../deps/hammerhead"),i=(r=o)&&r.__esModule?r:{default:r},p=n("../deps/testcafe-core"),a=i.default.Promise,l=i.default.eventSandbox.message,u="automation|scroll|request",c="automation|scroll|response";l.on(l.SERVICE_MSG_RECEIVED_EVENT,function(e){if(e.message.cmd===u){var t=e.message,n=t.offsetX,r=t.offsetY,o=t.maxScrollMargin,i=p.domUtils.findIframeByWindow(e.source),s=new f(i,{offsetX:n,offsetY:r});s.maxScrollMargin=o,s.run().then(function(){return l.sendServiceMsg({cmd:c},e.source)})}});var f=function(){function h(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),this.element=e,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this.scrollToCenter=t.scrollToCenter,this.skipParentFrames=t.skipParentFrames,this.maxScrollMargin={left:50,top:50}}return h.prototype._isScrollValuesChanged=function(e,t){return p.styleUtils.getScrollLeft(e)!==t.left||p.styleUtils.getScrollTop(e)!==t.top},h.prototype._setScroll=function(e,t){var n=t.left,r=t.top,o=p.domUtils.isHtmlElement(e)?p.domUtils.findDocument(e):e,i={left:p.styleUtils.getScrollLeft(o),top:p.styleUtils.getScrollTop(o)};n=Math.max(n,0),r=Math.max(r,0);var s=p.scrollController.waitForScroll();return p.styleUtils.setScrollLeft(o,n),p.styleUtils.setScrollTop(o,r),this._isScrollValuesChanged(o,i)?s:(s.cancel(),a.resolve())},h.prototype._getScrollToPoint=function(e,t,n){var r=t.x,o=t.y,i=Math.floor(e.width/2),s=Math.floor(Math.floor(e.height/2)),l=this.scrollToCenter?i:Math.min(n.left,i),a=this.scrollToCenter?s:Math.min(n.top,s),u=r>=e.scroll.left+e.width-l,c=r<=e.scroll.left+l,f=o>=e.scroll.top+e.height-a,d=o<=e.scroll.top+a,h=e.scroll.left,p=e.scroll.top;return u?h=r-e.width+l:c&&(h=r-l),f?p=o-e.height+a:d&&(p=o-a),{left:h,top:p}},h.prototype._getScrollToFullChildView=function(e,t,n){var r=null,o=null,i=e.width>=t.width,s=e.height>=t.height,l=p.positionUtils.calcRelativePosition(t,e);if(i){var a=e.width-t.width,u=Math.min(n.left,a);this.scrollToCenter&&(u=a/2),l.left<u?r=Math.round(e.scroll.left+l.left-u):l.right<u&&(r=Math.round(e.scroll.left+Math.min(l.left,-l.right)+u))}if(s){var c=e.height-t.height,f=Math.min(n.top,c);this.scrollToCenter&&(f=c/2),l.top<f?o=Math.round(e.scroll.top+l.top-f):l.bottom<f&&(o=Math.round(e.scroll.top+Math.min(l.top,-l.bottom)+f))}return{left:r,top:o}},h._getChildPoint=function(e,t,n){return{x:t.left-e.left+e.scroll.left+t.border.left+n.x,y:t.top-e.top+e.scroll.top+t.border.top+n.y}},h.prototype._getScrollPosition=function(e,t,n,r){var o=h._getChildPoint(e,t,n),i=this._getScrollToPoint(e,o,r),s=this._getScrollToFullChildView(e,t,r);return{left:Math.max(null===s.left?i.left:s.left,0),top:Math.max(null===s.top?i.top:s.top,0)}},h._getChildPointAfterScroll=function(e,t,n,r){return{x:Math.round(t.left+e.scroll.left-n.left+r.x),y:Math.round(t.top+e.scroll.top-n.top+r.y)}},h.prototype._isChildFullyVisible=function(e,t,n){var r=h._getChildPointAfterScroll(e,t,e.scroll,n),o=r.x,i=r.y,s=this._getScrollPosition(e,t,n,{left:0,top:0}),l=s.left,a=s.top;return!this._isTargetElementObscuredInPoint(o,i)&&l===e.scroll.left&&a===e.scroll.top},h.prototype._scrollToChild=function(e,t,n){for(var r=p.positionUtils.getClientDimensions(e),o=p.positionUtils.getClientDimensions(t),i=p.styleUtils.getInnerWidth(F),s=p.styleUtils.getInnerHeight(F),l=r.scroll,a=!this._isChildFullyVisible(r,o,n);a;){l=this._getScrollPosition(r,o,n,this.maxScrollMargin);var u=h._getChildPointAfterScroll(r,o,l,n),c=u.x,f=u.y,d=this._isTargetElementObscuredInPoint(c,f);this.maxScrollMargin.left+=20,this.maxScrollMargin.left>=i&&(this.maxScrollMargin.left=50,this.maxScrollMargin.top+=20),a=d&&this.maxScrollMargin.top<s}return this.maxScrollMargin={left:50,top:50},this._setScroll(e,l)},h.prototype._scrollElement=function(){if(!p.styleUtils.hasScroll(this.element))return a.resolve();var e=p.positionUtils.getClientDimensions(this.element),t=this._getScrollToPoint(e,{x:this.offsetX,y:this.offsetY},this.maxScrollMargin);return this._setScroll(this.element,t)},h.prototype._scrollParents=function(){var t=this,n=p.styleUtils.getScrollableParents(this.element),r=this.element,o=this.offsetX-Math.round(p.styleUtils.getScrollLeft(r)),i=this.offsetY-Math.round(p.styleUtils.getScrollTop(r)),s=null,l=null;return p.promiseUtils.times(n.length,function(e){return t._scrollToChild(n[e],r,{x:o,y:i}).then(function(){s=p.positionUtils.getClientDimensions(r),l=p.positionUtils.getClientDimensions(n[e]),o+=s.left-l.left+l.border.left,i+=s.top-l.top+l.border.top,r=n[e]})}).then(function(){return F.top===F||t.skipParentFrames?a.resolve():(0,p.sendRequestToFrame)({cmd:u,offsetX:o,offsetY:i,maxScrollMargin:t.maxScrollMargin},c,F.parent)})},h._getFixedAncestorOrSelf=function(e){return p.domUtils.findParent(e,!0,p.styleUtils.isFixedElement)},h.prototype._isTargetElementObscuredInPoint=function(e,t){var n=p.positionUtils.getElementFromPoint(e,t);if(!n)return!1;var r=h._getFixedAncestorOrSelf(n);return r&&!r.contains(this.element)},h.prototype.run=function(){var e=this;return this._scrollElement().then(function(){return e._scrollParents()})},h}();e.default=f,t.exports=e.default},select:{"base.js":function(e,t,n){e.__esModule=!0;var r=d(n("../../deps/hammerhead")),o=d(n("../../deps/testcafe-core")),i=d(n("../visible-element-automation")),s=n("../../get-element"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("./utils")),a=d(n("../move")),u=n("../../../../test-run/commands/options"),c=d(n("../../cursor")),f=d(n("../../errors"));function d(e){return e&&e.__esModule?e:{default:e}}var h=r.default.Promise,p=r.default.utils.browser,m=r.default.utils.featureDetection,E=r.default.eventSandbox.eventSimulator,g=r.default.eventSandbox.focusBlur,v=o.default.contentEditable,y=o.default.domUtils,S=o.default.positionUtils,b=o.default.eventUtils,_=o.default.delay,T=function(r){function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e,t));return n.absoluteStartPoint=null,n.absoluteEndPoint=null,n.clientPoint=null,n.speed=t.speed,n.downEvent=m.isTouchDevice?"touchstart":"mousedown",n.upEvent=m.isTouchDevice?"touchend":"mouseup",n.eventArgs={options:null,element:null},n.eventState={mousedownPrevented:!1,simulateDefaultBehavior:!0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,r),o._calculateEventArguments=function(e){var n=S.offsetToClientCoords(e);return(0,s.fromPoint)(n.x,n.y).then(function(e){var t=e.element;if(!t)throw new Error(f.default.elementIsInvisibleError);return{element:t,options:{clientX:n.x,clientY:n.y}}})},o.prototype._move=function(e){var t=this,n=e.element,r=e.offsetX,o=e.offsetY,i=e.speed,s=new u.MoveOptions({offsetX:r,offsetY:o,speed:i},!1);return new a.default(n,s).run().then(function(){return _(t.automationSettings.mouseActionStepDelay)})},o.prototype._bindMousedownHandler=function(){var n=this;b.bind(this.element,"mousedown",function e(t){n.eventState.mousedownPrevented=t.defaultPrevented,b.preventDefault(t),b.unbind(n.element,"mousedown",e)})},o.prototype._calculateAbsoluteStartPoint=function(){throw new Error("Not implemented")},o.prototype._calculateAbsoluteEndPoint=function(){throw new Error("Not implemented")},o.prototype._moveToPoint=function(e){l.scrollEditableElementByPoint(this.element,e),this.clientPoint=l.excludeElementScroll(this.element,e);var t={element:j.documentElement,offsetX:this.clientPoint.x,offsetY:this.clientPoint.y,speed:this.speed};return this._move(t)},o.prototype._mousedown=function(){var n=this;return c.default.leftButtonDown().then(function(){return o._calculateEventArguments(n.clientPoint)}).then(function(e){n.eventArgs=e;var t=(p.isWebKit||p.isIE)&&y.isSelectElement(n.element);return t&&n._bindMousedownHandler(),n.eventState.simulateDefaultBehavior=E[n.downEvent](n.eventArgs.element,n.eventArgs.options),!1===n.eventState.simulateDefaultBehavior&&(n.eventState.simulateDefaultBehavior=t&&!n.eventState.mousedownPrevented),n._focus()})},o.prototype._focus=function(){var n=this;return new h(function(e){var t=y.isContentEditableElement(n.element)?v.findContentEditableParent(n.element):n.element;g.focus(t,e,!1,!0)})},o.prototype._setSelection=function(){throw new Error("Not implemented")},o.prototype._mouseup=function(){var t=this;return c.default.buttonUp().then(function(){return t._setSelection(),o._calculateEventArguments(t.clientPoint)}).then(function(e){t.eventArgs=e,E[t.upEvent](t.eventArgs.element,t.eventArgs.options)})},o.prototype.run=function(){var e=this;return this.absoluteStartPoint=this._calculateAbsoluteStartPoint(),this.absoluteEndPoint=this._calculateAbsoluteEndPoint(),this._moveToPoint(this.absoluteStartPoint).then(function(){return e._mousedown()}).then(function(){return e._moveToPoint(e.absoluteEndPoint)}).then(function(){return e._mouseup()})},o}(i.default);e.default=T,t.exports=e.default},"calculate-select-text-arguments.js":function(e,t,n){e.__esModule=!0,e.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=h.isTextEditableElement(e),r=n?0:l.getFirstVisiblePosition(e),o=n?h.getElementValue(e).length:l.getLastVisiblePosition(e),i=t.startPos?Math.min(t.startPos,o):r,s=void 0===t.endPos||null===t.endPos?o:Math.min(t.endPos,o);return void 0!==t.offset?(s=0<=t.offset?Math.min(t.offset,s):(i=s,Math.max(0,s+t.offset)),{startPos:i,endPos:s}):void 0!==t.startLine?function(e,t){var n=h.getTextAreaValue(e),r=n&&n.length?n.split("\n"):[],o=r.length-1,i=t.startLine?Math.min(t.startLine,o):0,s=r[i]?r[i].length:0,l=t.startPos?Math.min(t.startPos,s):0,a=void 0===t.endLine||null===t.endLine?o:Math.min(t.endLine,o),u=r[a]?r[a].length:0,c=void 0===t.endPos||null===t.endPos?u:Math.min(t.endPos,u),f=h.getTextareaPositionByLineAndOffset(e,i,0),d=h.getTextareaPositionByLineAndOffset(e,a,0);return{startPos:f+l,endPos:d+c}}(e,t):{startPos:i,endPos:s}};var r,o=n("../../deps/testcafe-core"),i=(r=o)&&r.__esModule?r:{default:r},h=i.default.domUtils,l=i.default.contentEditable;t.exports=e.default},"select-editable-content.js":function(e,t,n){e.__esModule=!0;var r=s(n("../../deps/testcafe-core")),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("./utils")),i=s(n("./base"));function s(e){return e&&e.__esModule?e:{default:e}}var l=r.default.textSelection,f=r.default.contentEditable,a=r.default.positionUtils,u=function(u){function c(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,u.call(this,f.getNearestCommonAncestor(e,t),n)),o=f.getFirstVisiblePosition(e),i=f.getLastVisiblePosition(t),s={node:e,offset:o},l={node:t,offset:i},a=f.calculatePositionByNodeAndOffset(r.element,s);return f.calculatePositionByNodeAndOffset(r.element,l)<a&&(o=f.getLastVisiblePosition(e),i=f.getFirstVisiblePosition(t)),s=f.calculateNodeAndOffsetByPosition(e,o),l=f.calculateNodeAndOffsetByPosition(t,i),r.startNode=s.node,r.startOffset=s.offset,r.endNode=l.node,r.endOffset=l.offset,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,u),c.prototype._calculateAbsoluteStartPoint=function(){return o.getSelectionCoordinatesByNodeAndOffset(this.element,this.startNode,this.startOffset)||a.findCenter(this.element)},c.prototype._calculateAbsoluteEndPoint=function(){return o.getSelectionCoordinatesByNodeAndOffset(this.element,this.endNode,this.endOffset)||a.findCenter(this.element)},c.prototype._setSelection=function(){if(!1!==this.eventState.simulateDefaultBehavior){var e={node:this.startNode,offset:this.startOffset},t={node:this.endNode,offset:this.endOffset};l.selectByNodesAndOffsets(e,t,!0)}},c}(i.default);e.default=u,t.exports=e.default},"select-text.js":function(e,t,n){e.__esModule=!0;var r=i(n("../../deps/testcafe-core")),o=i(n("./base")),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("./utils"));function i(e){return e&&e.__esModule?e:{default:e}}var a=r.default.textSelection,u=r.default.domUtils,c=r.default.positionUtils,s=function(i){function s(e,t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,i.call(this,e,r));return o.startPos=t,o.endPos=n,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,i),s.prototype._calculateAbsoluteStartPoint=function(){return l.getSelectionCoordinatesByPosition(this.element,this.startPos)||c.findCenter(this.element)},s.prototype._calculateAbsoluteEndPoint=function(){var e=l.getSelectionCoordinatesByPosition(this.element,this.endPos);return e||(u.isContentEditableElement(this.element)?l.getLastVisibleSelectionPosition(this.element,this.startPos,this.endPos):c.findCenter(this.element))},s.prototype._setSelection=function(){var e=u.isTextEditableElement(this.element),t=u.isContentEditableElement(this.element);(e||t)&&!1!==this.eventState.simulateDefaultBehavior&&a.select(this.element,this.startPos,this.endPos)},s.prototype.run=function(e){var t=this;return this._ensureElement(e).then(function(){return i.prototype.run.call(t)})},s}(o.default);e.default=s,t.exports=e.default},"utils.js":function(e,t,n){e.__esModule=!0,e.getSelectionCoordinatesByPosition=function(e,t){var n=h.isTextEditableElement(e),r=h.isContentEditableElement(e);return n&&0<h.getElementValue(e).length||r&&i.getContentEditableValue(e).length?c(e,t):p.findCenter(e)},e.getSelectionCoordinatesByNodeAndOffset=function(e,t,n){var r=h.findDocument(e).createRange();r.setStart(t,Math.min(n,t.length)),r.setEnd(t,Math.min(n,t.length));var o=r.getClientRects()[0];return o?{x:(o=l(o=s(e,o))).left,y:Math.floor(o.top+(o.bottom-o.top)/2)}:null},e.getLastVisibleSelectionPosition=function(e,t,n){for(var r=n<t?1:-1,o=n,i=null;o!==t&&!(i=c(e,o+=r)););return i||(i=c(e,t)||p.findCenter(e)),i},e.scrollEditableElementByPoint=function(e,t){if(h.isEditableElement(e)){var n=h.isTextAreaElement(e);if(!h.isInputElement(e)||!(u.isFirefox||u.isIE&&10<u.version)){var r=p.getOffsetPosition(e),o=m.getBordersWidth(e),i=m.getElementScroll(e),s=t.x-r.left-o.left,l=t.y-r.top-o.top,a=null;if(n)return l<i.top&&(a=l),l>e.clientHeight+i.top&&(a=l-e.clientHeight),void(null!==a&&m.setScrollTop(e,Math.round(a)));s<i.left&&(a=s),s>e.clientWidth+i.left&&(a=s-e.clientWidth),null!==a&&m.setScrollLeft(e,Math.round(a))}}},e.excludeElementScroll=function(e,t){var n=h.isTextEditableElement(e),r=h.isInputElement(e);if(!n&&!h.isContentEditableElement(e))return t;var o=p.getOffsetPosition(e),i=m.getBordersWidth(e),s=m.getElementScroll(e),l=o.left+i.left+e.clientWidth;return r&&n&&(u.isFirefox||u.isIE&&10<u.version)?{x:Math.min(t.x,l),y:t.y}:{x:t.x-s.left,y:t.y-s.top}};var f=o(n("../../deps/hammerhead")),r=o(n("../../deps/testcafe-core"));function o(e){return e&&e.__esModule?e:{default:e}}var u=f.default.utils.browser,h=r.default.domUtils,p=r.default.positionUtils,m=r.default.styleUtils,i=r.default.contentEditable,d=r.default.arrayUtils,E=["direction","font-family","font-size","font-size-adjust","font-variant","font-weight","font-style","letter-spacing","line-height","text-align","text-indent","text-transform","word-wrap","word-spacing","padding-top","padding-left","padding-right","padding-bottom","margin-top","margin-left","margin-right","margin-bottom","border-top-width","border-left-width","border-right-width","border-bottom-width"];function s(e,t){var n=m.getBordersWidth(e),r=p.getOffsetPosition(e),o=e.scrollHeight||e.getBoundingClientRect().height,i=Math.ceil(t.left),s=Math.ceil(t.top),l=Math.floor(t.bottom);if(!h.isTextAreaElement(e)){var a=p.offsetToClientCoords({x:r.left,y:r.top}),u=a.x+n.left+1,c=a.y+n.top+1,f=a.y+n.top+n.bottom+o,d=a.y+n.top+o-1;i=Math.ceil(i<=a.x?u:t.left),s=Math.ceil(s<=a.y?c:t.top),l=Math.floor(f<=l?d:t.bottom)}return{left:i,top:s,bottom:l}}function l(e){var t=m.getElementScroll(j);return{left:e.left+t.left,top:e.top+t.top,bottom:e.bottom+t.top}}function a(e,t){var n=e.getBoundingClientRect(),r=function(t){var e=j.body,n=p.getOffsetPosition(t),r=m.getElementMargin(t),o=n.top-r.top,i=n.left-r.left,s=j.createElement("div"),l="white-space:pre-wrap;border-style:solid;";if("absolute"===m.get(e,"position")){var a=m.getElementMargin(e),u=m.get(e,"left"),c=m.get(e,"top");i-=a.left+(parseInt(u.replace("px",""),10)||0),o-=a.top+(parseInt(c.replace("px",""),10)||0)}return d.forEach(E,function(e){l+=e+":"+m.get(t,e)+";"}),m.set(s,{cssText:l,position:"absolute",left:i+"px",top:o+"px",width:t.scrollWidth+"px",height:t.scrollHeight+"px"}),f.default.nativeMethods.nodeTextContentSetter.call(s,h.getElementValue(t)+" "),e.appendChild(s),s}(e),o=null,i=e.getBoundingClientRect(),s=i.top-n.top,l=i.left-n.left,a=h.getElementValue(e).length;try{var u=j.createRange();u.setStart(f.default.nativeMethods.nodeFirstChildGetter.call(r),Math.min(t,a)),u.setEnd(f.default.nativeMethods.nodeFirstChildGetter.call(r),Math.min(t+1,a+1)),h.isTextAreaElement(e)?0===(o=u.getBoundingClientRect()).width&&0===o.height&&(o=u.getClientRects()[0]):o=u.getClientRects()[0]}catch(e){o=null}return h.remove(r),o?{width:o.width,height:o.height,top:o.top-s,bottom:o.bottom-s,left:o.left-l,right:o.right-l}:null}function c(e,t){var n=null;return(n=h.isContentEditableElement(e)?function(e,t){var n=h.findDocument(e).createRange(),r=i.calculateNodeAndOffsetByPosition(e,t);return n.setStart(r.node,Math.min(r.offset,r.node.length)),n.setEnd(r.node,Math.min(r.offset,r.node.length)),n.getClientRects()[0]}(e,t):"function"==typeof e.createTextRange?function(e,t){var n=e.createTextRange();return n.collapse(!0),n.moveStart("character",t),n.moveEnd("character",t),n.collapse(!0),n.getBoundingClientRect()}(e,t):a(e,t))?{x:(n=l(n=s(e,n))).left,y:Math.floor(n.top+(n.bottom-n.top)/2)}:null}}},type:{"index.js":function(e,t,n){e.__esModule=!0;var r=i(n("../../deps/hammerhead")),o=i(n("../../deps/testcafe-core")),c=n("../../../../test-run/commands/options"),f=i(n("../click")),l=i(n("./type-text")),s=i(n("../../utils/get-key-code")),a=i(n("../../utils/get-key-identifier")),d=n("../../utils/offsets"),u=i(n("../../settings")),h=i(n("../../utils/get-key-properties"));function i(e){return e&&e.__esModule?e:{default:e}}var p=r.default.Promise,m=r.default.utils.extend,E=r.default.utils.browser,g=r.default.eventSandbox.eventSimulator,v=r.default.eventSandbox.elementEditingWatcher,y=o.default.domUtils,S=o.default.promiseUtils,b=o.default.contentEditable,_=o.default.textSelection,T=o.default.delay,A=o.default.KEY_MAPS.specialKeys,x=function(){function i(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.element=i.findTextEditableChild(e)||e,this.typingText=t.toString(),this.modifiers=n.modifiers,this.caretPos=n.caretPos,this.replace=n.replace,this.paste=n.paste,this.offsetX=n.offsetX,this.offsetY=n.offsetY,this.speed=n.speed,this.automationSettings=new u.default(this.speed),this.elementChanged=e!==this.element,this.currentPos=0,this.currentKeyCode=null,this.currentCharCode=null,this.currentKey=null,this.currentKeyIdentifier=null,this.eventArgs={options:null,element:null},this.eventState={skipType:!1,simulateKeypress:!0,simulateTypeChar:!0}}return i.findTextEditableChild=function(e){var t=null;if(!y.isEditableElement(e))for(var n=e.querySelectorAll("*"),r=0;r<n.length;r++)if(y.isTextEditableElementAndEditingAllowed(n[r])){t=n[r];break}return t},i.prototype._calculateEventArguments=function(e){var t=y.getActiveElement(),n=y.isContentEditableElement(this.element),r=this.eventArgs.element||this.element;n||t===r||(r=i.findTextEditableChild(t)||t);var o=m({keyCode:e?this.currentCharCode:this.currentKeyCode},this.modifiers);return e&&(o.charCode=this.currentCharCode),m(o,(0,h.default)(e,this.currentKey,this.currentKeyIdentifier)),{element:r,options:o}},i.prototype._calculateTargetElement=function(){var e=y.getActiveElement(),t=y.isContentEditableElement(this.element);if(t){if(e!==b.findContentEditableParent(this.element))return void(this.eventState.skipType=!0)}else if(e!==this.element)return void(this.eventState.skipType=!0);this.element=t?this.element:e},i.prototype._click=function(e){var t=this,n=y.getActiveElement(),r=y.isTextEditableElementAndEditingAllowed(this.element),o=y.isContentEditableElement(this.element);if(n!==this.element){var i=(0,d.getDefaultAutomationOffsets)(this.element),s=i.offsetX,l=i.offsetY,a=new c.ClickOptions({offsetX:this.elementChanged?s:this.offsetX,offsetY:this.elementChanged?l:this.offsetY,speed:this.speed,caretPos:this.caretPos,modifiers:this.modifiers});return new f.default(this.element,a).run(e).then(function(){return T(t.automationSettings.mouseActionStepDelay)})}if(r&&v.watchElementEditing(this.element),r||o){var u=_.getSelectionStart(this.element);isNaN(parseInt(this.caretPos,10))||this.caretPos===u||_.select(this.element,this.caretPos,this.caretPos)}return p.resolve()},i.prototype._type=function(){var e=this;if(this.eventState.skipType)return p.resolve();var t=y.isContentEditableElement(this.element);return this.replace&&(y.isTextEditableElementAndEditingAllowed(this.element)?_.select(this.element):t&&_.deleteSelectionContents(this.element,!0)),S.whilst(function(){return!e._isTypingFinished()},function(){return e._typingStep()})},i.prototype._isTypingFinished=function(){return this.currentPos===this.typingText.length},i.prototype._typingStep=function(){var e=this.typingText.charAt(this.currentPos);return this.currentKeyCode=(0,s.default)(e),this.currentCharCode=this.typingText.charCodeAt(this.currentPos),this.currentKey=this.currentKeyCode===A.enter?"Enter":e,this.currentKeyIdentifier=(0,a.default)(this.currentKey),this._keydown(),this._keypress(),this._keyup()},i.prototype._keydown=function(){this.eventArgs=this._calculateEventArguments(),this.eventState.simulateKeypress=g.keydown(this.eventArgs.element,this.eventArgs.options)},i.prototype._keypress=function(){!1!==this.eventState.simulateKeypress&&(this.eventArgs=this._calculateEventArguments(!0),this.eventState.simulateTypeChar=E.isAndroid||g.keypress(this.eventArgs.element,this.eventArgs.options))},i.prototype._keyup=function(){var e=this,t=this.eventArgs.element;this.eventArgs=this._calculateEventArguments();var n=y.isTextEditableElement(this.element),r=y.isContentEditableElement(this.element),o=this.paste||!n&&!r;return p.resolve().then(function(){return o?e._typeAllText(t):e._typeChar(t)}).then(function(){g.keyup(e.eventArgs.element,e.eventArgs.options),o?e.currentPos=e.typingText.length:e.currentPos++})},i.prototype._typeChar=function(e){if(!1===this.eventState.simulateKeypress||!1===this.eventState.simulateTypeChar)return v.restartWatchingElementEditing(e),T(this.automationSettings.keyActionStepDelay);var t=this.typingText.charAt(this.currentPos),n=/^\d$/.test(t),r=0===this.currentPos?null:this.typingText.charAt(this.currentPos-1);if(y.isInputElement(e)&&"number"===e.type){var o=_.getSelectionStart(e),i=y.getInputValue(e).length,s=/^\d/.test(this.typingText);if(!n&&(s||!("."===t||"-"===t&&i)||0!==o))return T(this.automationSettings.keyActionStepDelay);n&&("."===r||"-"===r&&!i)&&(t=r+t)}return(0,l.default)(e,t,null),T(this.automationSettings.keyActionStepDelay)},i.prototype._typeAllText=function(e){return(0,l.default)(e,this.typingText,this.caretPos),T(this.automationSettings.keyActionStepDelay)},i.prototype.run=function(e){var t=this;return this._click(e).then(function(){return t._calculateTargetElement()}).then(function(){return t._type()})},i}();e.default=x,t.exports=e.default},"type-text.js":function(e,t,n){e.__esModule=!0,e.default=function(e,t,n){p.isContentEditableElement(e)&&function(e,t){var n=g(e),r=n.startPos.node,o=n.endPos.node,i=!0,s=!0,l=t;t=t.replace(E,String.fromCharCode(160));var a=function(){s=!1};function u(e,t,n){n()}r&&o&&p.isContentEditableElement(r)&&p.isContentEditableElement(o)&&(p.isTheSameNode(r,o)||(m.deleteSelectionContents(e),n=function(e,t){var n=t.startPos.node,r=n.parentNode&&n.parentElement;return(f.isChrome&&f.version<58||f.isSafari||!r||!p.isElementContainsNode(e,n))&&(t=g(e),m.hasInverseSelectionContentEditable(e)&&(t={startPos:t.endPos,endPos:t.startPos})),t.endPos.offset=t.startPos.offset,t}(e,n),r=n.startPos.node),r&&p.isContentEditableElement(r)&&p.isRenderedNode(r)&&(i=y(e,l),s=i&&!f.isIE11,h.addInternalEventListener(F,["input"],a),h.addInternalEventListener(F,["textinput"],u),i&&(p.isElementNode(r)?function(e,t,n){var r=j.createTextNode(t),o=t.length,i={node:r,offset:o};"br"===p.getTagName(e)?e.parentNode.insertBefore(r,e):0<n?e.insertBefore(r,e.childNodes[n]):e.appendChild(r),m.selectByNodesAndOffsets(i,i)}(r,t):function(e,t,n){var r=t.startPos.node;p.isElementContainsNode(e,r)||(t=v(g(e)),r=t.startPos.node);var o=t.startPos.offset,i=t.endPos.offset,s=r.nodeValue,l={node:r,offset:o+n.length};r.nodeValue=s.substring(0,o)+n+s.substring(i,s.length),m.selectByNodesAndOffsets(l,l)}(e,v(n),t)),(0,c.default)().then(function(){s&&d.input(e),h.removeInternalEventListener(F,["input"],a),h.removeInternalEventListener(F,["textinput"],u)})))}(e,t),p.isElementReadOnly(e)||(p.isTextEditableElement(e)?function(e,t){var n=p.getElementValue(e),r=t.length,o=m.getSelectionStart(e),i=m.getSelectionEnd(e),s=p.isInputElement(e)&&"number"===e.type;if(y(e,t)){var l=!f.isIE&&s?null:parseInt(e.maxLength,10);l<0&&(l=f.isIE&&f.version<17?0:null),(null===l||isNaN(l)||l>n.length)&&(s&&f.isIOS&&"."===n[n.length-1]&&(o+=1,i+=1),p.setElementValue(e,n.substring(0,o)+t+n.substring(i,n.length)),m.select(e,o+r,o+r)),d.input(e)}}(e,t):p.isInputElement(e)&&function(e,t,n){if(null!==n){var r=p.getElementValue(e);p.setElementValue(e,r.substr(0,n)+t+r.substr(n+t.length))}else p.setElementValue(e,t);d.change(e),d.input(e)}(e,t,n))};var r=i(n("../../deps/hammerhead")),o=i(n("../../deps/testcafe-core")),c=i(n("../../utils/next-tick"));function i(e){return e&&e.__esModule?e:{default:e}}var f=r.default.utils.browser,s=r.default.sandbox.event,d=r.default.eventSandbox.eventSimulator,h=r.default.eventSandbox.listeners,p=o.default.domUtils,l=o.default.contentEditable,m=o.default.textSelection,E=/ /g;function g(e){var t=m.getSelectionByElement(e),n=m.hasInverseSelectionContentEditable(e);return m.hasElementContainsSelection(e)?l.getSelection(e,t,n):{startPos:l.calculateNodeAndOffsetByPosition(e,0),endPos:l.calculateNodeAndOffsetByPosition(e,0)}}function v(e){var t=e.startPos.node,n=e.startPos.offset,r=e.endPos.offset,o=l.getFirstNonWhitespaceSymbolIndex(t.nodeValue),i=l.getLastNonWhitespaceSymbolIndex(t.nodeValue);return n<o&&0!==n?(e.startPos.offset=o,e.endPos.offset=r+o-n):i<r&&r!==t.nodeValue.length&&(e.startPos.offset=t.nodeValue.length,e.endPos.offset=r+t.nodeValue.length-n),e}function y(e,t){var n=void 0;function r(e){e.preventDefault(),n=!0}function o(e){"textInput"===e.type&&(n=!1)}f.isSafari&&(h.addInternalEventListener(F,["textInput"],r),s.on(s.EVENT_PREVENTED_EVENT,o));var i=f.isFirefox||d.textInput(e,t)||n;return f.isSafari&&(h.removeInternalEventListener(F,["textInput"],r),s.off(s.EVENT_PREVENTED_EVENT,o)),i||f.isIE11}t.exports=e.default}},"upload.js":function(e,t,n){e.__esModule=!0;var o=n("../deps/hammerhead"),i=n("../deps/testcafe-core"),r=function(){function r(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.element=e,this.paths=t,this.createError=n}return r.prototype.run=function(){var t=this;return(0,o.doUpload)(this.element,this.paths).then(function(e){if(e.length)throw t.createError(i.arrayUtils.map(e,function(e){return e.path}))})},r}();e.default=r,t.exports=e.default},"visible-element-automation.js":function(e,t,n){e.__esModule=!0;var r=o(n("../deps/hammerhead")),p=n("../deps/testcafe-core"),i=o(n("../utils/get-automation-point")),s=o(n("../utils/screen-point-to-client")),d=o(n("../utils/get-device-point")),l=n("../utils/offsets"),m=n("../get-element"),a=o(n("../errors")),u=o(n("../settings")),c=o(n("./scroll")),f=o(n("./move")),h=n("../../../test-run/commands/options");function o(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var g=r.default.utils.extend,v=function e(t){var n=t.element,r=void 0===n?null:n,o=t.clientPoint,i=void 0===o?null:o,s=t.screenPoint,l=void 0===s?null:s,a=t.isTarget,u=void 0!==a&&a,c=t.inMoving,f=void 0!==c&&c;E(this,e),this.element=r,this.clientPoint=i,this.screenPoint=l,this.isTarget=u,this.inMoving=f,this.devicePoint=(0,d.default)(i)},y=function(r){function o(e,t){E(this,o);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this));return n.TARGET_ELEMENT_FOUND_EVENT="automation|target-element-found-event",n.element=e,n.options=t,n.automationSettings=new u.default(t.speed),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,r),o.prototype._getElementForEvent=function(e){var t=e.point,n=t.x,r=t.y,o=p.positionUtils.containsOffset(this.element,this.options.offsetX,this.options.offsetY)?this.element:null;return(0,m.fromPoint)(n,r,o).then(function(e){return e.element})},o.prototype._moveToElement=function(){var e=this,t=new h.MoveOptions(g({skipScrolling:!0},this.options),!1);return new f.default(this.element,t).run().then(function(){return(0,p.delay)(e.automationSettings.mouseActionStepDelay)})},o.prototype._scrollToElement=function(){var e=this;return new c.default(this.element,new h.ScrollOptions(this.options)).run().then(function(){return(0,p.delay)(e.automationSettings.mouseActionStepDelay)})},o.prototype._getElementOffset=function(){var e=(0,l.getOffsetOptions)(this.element),t=this.options,n=t.offsetX,r=t.offsetY;return{offsetX:n=n||0===n?n:e.offsetX,offsetY:r=r||0===r?r:e.offsetY}},o.prototype._wrapAction=function(e){var f=this,t=this._getElementOffset(),n=t.offsetX,r=t.offsetY,d=(0,i.default)(this.element,n,r),h=p.positionUtils.getClientPosition(this.element);return e().then(function(){var l=(0,i.default)(f.element,n,r),a=p.positionUtils.getClientPosition(f.element),u=(0,s.default)(f.element,l),c=p.positionUtils.containsOffset(f.element,n,r)?f.element:null;return(0,m.fromPoint)(u.x,u.y,c).then(function(e){var t=e.element,n=e.corrected,r=t;if(!r)return new v({});var o=!c||n||r===f.element;o||(o=-1<p.arrayUtils.indexOf(p.domUtils.getParents(r),f.element));var i=d.x!==l.x||d.y!==l.y,s=h.x!==a.x||h.y!==a.y;return new v({element:t,clientPoint:u,screenPoint:l,isTarget:o,inMoving:i&&s})})})},o._checkElementState=function(e,t){if(!e.element)throw new Error(a.default.elementIsInvisibleError);if(t&&(!e.isTarget||e.inMoving))throw new Error(a.default.foundElementIsNotTarget)},o.prototype._ensureElement=function(t,n){var r=this;return this._wrapAction(function(){return r._scrollToElement()}).then(function(e){return o._checkElementState(e,t)}).then(function(){return r._wrapAction(function(){return r._moveToElement()})}).then(function(e){return n||o._checkElementState(e,t),e}).then(function(e){return r.emit(r.TARGET_ELEMENT_FOUND_EVENT,{}),{element:e.element,clientPoint:e.clientPoint,screenPoint:e.screenPoint,devicePoint:e.devicePoint}})},o}(p.serviceUtils.EventEmitter);e.default=y,t.exports=e.default}},"settings.js":function(e,t,n){e.__esModule=!0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.speedFactor=e||1}return r(t,[{key:"mouseActionStepDelay",get:function(){return 1===this.speedFactor?10:400*(1-this.speedFactor)}},{key:"keyActionStepDelay",get:function(){return 1===this.speedFactor?10:200*(1-this.speedFactor)}},{key:"cursorSpeed",get:function(){return Math.pow(400,this.speedFactor)/4}},{key:"draggingSpeed",get:function(){return Math.pow(16,this.speedFactor)/4}}]),t}();e.default=o,t.exports=e.default},utils:{"get-automation-point.js":function(e,t,n){e.__esModule=!0,e.default=function(e,t,n){var r=a.isFirefox?Math.ceil:Math.round,o=l.positionUtils.getOffsetPosition(e,r),i=e===j.documentElement?0:o.left,s=e===j.documentElement?0:o.top;return{x:i+t,y:s+n}};var r,l=n("../deps/testcafe-core"),o=n("../deps/hammerhead"),a=((r=o)&&r.__esModule?r:{default:r}).default.utils.browser;t.exports=e.default},"get-device-point.js":function(e,t,n){e.__esModule=!0,e.default=function(e){if(!e)return null;var t=F.screenLeft||F.screenX,n=F.screenTop||F.screenY,r=t+e.x,o=n+e.y;return{x:r,y:o}},t.exports=e.default},"get-key-code.js":function(e,t,n){e.__esModule=!0,e.default=function(e){if((0,s.default)(e))return e.toUpperCase().charCodeAt(0);var t=o.KEY_MAPS.shiftMap[e]?o.KEY_MAPS.shiftMap[e].charCodeAt(0):e.charCodeAt(0);return o.KEY_MAPS.symbolCharCodeToKeyCode[t]||t};var r,o=n("../deps/testcafe-core"),i=n("./is-letter"),s=(r=i)&&r.__esModule?r:{default:r};t.exports=e.default},"get-key-identifier.js":function(e,t,n){e.__esModule=!0,e.default=function(e){return(0,o.default)(e)?r.default.LETTERS[e.toLowerCase()]:r.default.SYMBOLS[e]||r.default.SPECIAL_KEYS[e]||e};var r=i(n("./key-identifier-maps")),o=i(n("./is-letter"));function i(e){return e&&e.__esModule?e:{default:e}}t.exports=e.default},"get-key-properties.js":function(e,t,n){e.__esModule=!0,e.default=function(e,t,n){var r={};return"keyIdentifier"in KeyboardEvent.prototype&&(r.keyIdentifier=e?"":n),"key"in KeyboardEvent.prototype&&(r.key=t),r},t.exports=e.default},"get-line-rect-intersection.js":function(e,t,n){e.__esModule=!0,e.default=function(e,t,n){for(var r=[],o=null,i=[{x1:n.left,y1:n.top,x2:n.left,y2:n.bottom,isHorizontal:!1},{x1:n.right,y1:n.top,x2:n.right,y2:n.bottom,isHorizontal:!1},{x1:n.left,y1:n.top,x2:n.right,y2:n.top,isHorizontal:!0},{x1:n.left,y1:n.bottom,x2:n.right,y2:n.bottom,isHorizontal:!0}],s=0;s<i.length;s++)(o=a(e,t,i[s]))&&r.push(o);return r.length?1===r.length?r[0]:l(e,r[0])<l(e,r[1])?r[0]:r[1]:null};var i=n("../deps/testcafe-core");function l(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function a(e,t,n){var r=null;if(n.isHorizontal)return(r=i.positionUtils.getLineXByYCoord(e,t,n.y1))&&r>=n.x1&&r<=n.x2?{x:r,y:n.y1}:null;var o=i.positionUtils.getLineYByXCoord(e,t,n.x1);return o&&o>=n.y1&&o<=n.y2?{x:n.x1,y:o}:null}t.exports=e.default},"is-letter.js":function(e,t,n){e.__esModule=!0,e.default=function(e){return 1===e.length&&("a"<=e&&e<="z"||"A"<=e&&e<="Z")},t.exports=e.default},"key-identifier-maps.js":function(e,t,n){e.__esModule=!0,e.default={SPECIAL_KEYS:{capslock:"CapsLock",delete:"U+007F",end:"End",enter:"Enter",esc:"U+001B",home:"Home",ins:"Insert",pagedown:"PageDown",pageup:"PageUp",space:"U+0020",tab:"Tab",alt:"Alt",ctrl:"Control",meta:"Meta",shift:"Shift"},LETTERS:{a:"U+0041",b:"U+0042",c:"U+0043",d:"U+0044",e:"U+0045",f:"U+0046",g:"U+0047",h:"U+0048",i:"U+0049",j:"U+004A",k:"U+004B",l:"U+004C",m:"U+004D",n:"U+004E",o:"U+004F",p:"U+0050",q:"U+0051",r:"U+0052",s:"U+0053",t:"U+0054",u:"U+0055",v:"U+0056",w:"U+0057",x:"U+0058",y:"U+0059",z:"U+005A"},SYMBOLS:{0:"U+0030",1:"U+0031",2:"U+0032",3:"U+0033",4:"U+0034",5:"U+0035",6:"U+0036",7:"U+0037",8:"U+0038",9:"U+0039"," ":"U+0020","!":"U+0021","@":"U+0040","#":"U+0023",$:"U+0024","%":"U+0025","^":"U+005E","*":"U+002A","(":"U+0028",")":"U+0029",_:"U+005F","|":"U+007C","\\":"U+005C","/":"U+002F","?":"U+003F",".":"U+002E",",":"U+002C","<":"U+003C",">":"U+003E","[":"U+005B","]":"U+005D","{":"U+007B","}":"U+007D","":"U+00A7","":"U+00B1","'":"U+0027",'"':"U+0022",":":"U+003A",";":"U+003B","`":"U+0060","~":"U+007E"}},t.exports=e.default},"next-tick.js":function(e,t,n){e.__esModule=!0,e.default=function(){return new s(function(e){return l.setTimeout.call(F,e,0)})};var r,o=n("../deps/hammerhead"),i=(r=o)&&r.__esModule?r:{default:r},s=i.default.Promise,l=i.default.nativeMethods;t.exports=e.default},"offsets.js":function(e,t,n){e.__esModule=!0,e.getDefaultAutomationOffsets=c,e.getOffsetOptions=function(e,t,n){var r=c(e);if(t="number"==typeof t?Math.round(t):r.offsetX,n="number"==typeof n?Math.round(n):r.offsetY,0<t&&0<n)return{offsetX:t,offsetY:n};var o=u.positionUtils.getClientDimensions(e),i=Math.round(Math.max(e.scrollWidth,o.width)),s=Math.round(Math.max(e.scrollHeight,o.height)),l=o.scrollbar.right+o.border.left+o.border.right+i,a=o.scrollbar.bottom+o.border.top+o.border.bottom+s;return{offsetX:t<0?l+t:t,offsetY:n<0?a+n:n}};var u=n("../deps/testcafe-core");function r(e){var t=e/2;return t<1?0:Math.round(t)}function c(e){var t=u.positionUtils.getElementRectangle(e);return{offsetX:r(t.width),offsetY:r(t.height)}}},"screen-point-to-client.js":function(e,t,n){e.__esModule=!0,e.default=function(e,t){var n=r.styleUtils.getElementScroll(e);return!/html/i.test(e.tagName)&&r.styleUtils.hasScroll(e)&&(t.x-=n.left,t.y-=n.top),r.positionUtils.offsetToClientCoords(t)};var r=n("../deps/testcafe-core");t.exports=e.default},"utils.js":function(e,t,n){e.__esModule=!0,e.focusAndSetSelection=function(m,E,g){return new s(function(e){var t=T.getActiveElement(),n=T.isTextEditableElement(m),r=T.closest(m,"label[for]"),o=T.isElementFocusable(m),i=!T.isElementFocusable(m)&&r,s=T.isContentEditableElement(m),l=s?b.findContentEditableParent(m):m;if(E&&y.isWebKit&&n&&_.select(m,0,0),i)return E&&A(r),void e();var a=!E,u=!1;if(!o&&!s){var c=T.findDocument(l),f=v.documentActiveElementGetter.call(c),d=T.isBodyElement(f),h=T.isBodyElement(l)?l:T.getFocusableParent(l),p=f&&!d&&T.containsElement(f,l);if(p||d&&T.isBodyElement(h))return void e();l=h||c.body,u=!0}S.focus(l,function(){!E||s||m===T.getActiveElement()?(function(e,t){var n=T.isTextEditableElement(e),r=T.isContentEditableElement(e);if(n||r)if(r&&isNaN(parseInt(t,10)))_.setCursorToLastVisiblePosition(e);else{var o=isNaN(parseInt(t,10))?T.getElementValue(e).length:t;_.select(e,o,o)}else{var i=b.findContentEditableParent(e);i&&_.setCursorToLastVisiblePosition(b.findContentEditableParent(i))}}(m,g),E||T.getActiveElement()===t?e():S.focus(t,e,!0,!0)):e()},a,!0,!1,u)})},e.focusByRelatedElement=A;var r=i(n("../deps/hammerhead")),o=i(n("../deps/testcafe-core"));function i(e){return e&&e.__esModule?e:{default:e}}var s=r.default.Promise,v=r.default.nativeMethods,y=r.default.utils.browser,S=r.default.eventSandbox.focusBlur,b=o.default.contentEditable,_=o.default.textSelection,T=o.default.domUtils;function A(e){var t=T.closest(e,"label[for]");if(t){var n=j.getElementById(t.getAttribute("for"));n&&T.getActiveElement()!==n&&S.focus(n,o.default.noop,!1,!0)}}}}},core:{deps:{"hammerhead.js":function(e,t,n){e.__esModule=!0,e.default=F["%hammerhead%"],t.exports=e.default}},utils:{"array.js":function(e,t,n){e.__esModule=!0,e.toArray=function(e){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t},e.reverse=function(e){return f.call(e)},e.isArray=function(e){return"[object Array]"===i.default.nativeMethods.objectToString.call(e)},e.find=function(e,t){for(var n=e.length,r=0;r<n;r++)if(t(e[r],r,e))return e[r];return null},e.indexOf=p,e.forEach=function(e,t){l.call(e,t)},e.some=function(e,t){return a.call(e,t)},e.map=function(e,t){return u.call(e,t)},e.filter=function(e,t){return c.call(e,t)},e.reduce=function(e,t,n){return d.call(e,t,n)},e.remove=function(e,t){var n=p(e,t);-1<n&&h.call(e,n,1)},e.equals=function(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0},e.getCommonElement=function(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<t.length;r++)if(e[n]===t[r])return e[n];return null};var r,o=n("../deps/hammerhead"),i=(r=o)&&r.__esModule?r:{default:r},s=Array.prototype.indexOf,l=Array.prototype.forEach,a=Array.prototype.some,u=Array.prototype.map,c=Array.prototype.filter,f=Array.prototype.reverse,d=Array.prototype.reduce,h=Array.prototype.splice;function p(e,t){return s.call(e,t)}},"dom.js":function(e,t,n){e.__esModule=!0,e.isRadioButtonElement=e.getTopSameDomainWindow=e.findParent=e.getParents=e.closest=e.getTagName=e.getMapContainer=e.getScrollbarSize=e.isElementReadOnly=e.isHammerheadAttr=e.isElementFocusable=e.isShadowUIElement=e.isDomElement=e.isContentEditableElement=e.isTextEditableElementAndEditingAllowed=e.isTextEditableElement=e.isTextEditableInput=e.isWindow=e.isDocument=e.isHtmlElement=e.isBodyElement=e.isMapElement=e.isSVGElement=e.isOptionElement=e.isSelectElement=e.isFormElement=e.isImgElement=e.isAnchorElement=e.isTextAreaElement=e.isFileInput=e.isButtonElement=e.isInputElement=e.isIframeElement=e.isRenderedNode=e.isTextNode=e.isElementNode=e.getSelectVisibleChildren=e.getChildVisibleIndex=e.getSelectParent=e.isCrossDomainWindows=e.getIframeByElement=e.isElementInIframe=e.isElementInDocument=e.findDocument=e.getActiveElement=void 0,e.getFocusableElements=C,e.containsElement=O,e.getTextareaIndentInLine=function(e,t){var n=M(e);if(!n)return 0;var r=n.substring(0,t),o=-1===r.lastIndexOf("\n")?0:r.lastIndexOf("\n")+1;return t-o},e.getTextareaLineNumberByPosition=function(e,t){for(var n=M(e).split("\n"),r=0,o=0,i=0;r<=t;i++){if(t<=r+n[i].length){o=i;break}r+=n[i].length+1}return o},e.getTextareaPositionByLineAndOffset=function(e,t,n){for(var r=M(e).split("\n"),o=0,i=0;i<t;i++)o+=r[i].length+1;return o+n},e.blocksImplicitSubmission=function(e){return(E.isSafari?/^(text|password|color|date|time|datetime|datetime-local|email|month|number|search|tel|url|week|image)$/i:E.isFirefox?/^(text|password|date|time|datetime|datetime-local|email|month|number|search|tel|url|week|image)$/i:E.isIE?/^(text|password|color|date|time|datetime|datetime-local|email|file|month|number|search|tel|url|week|image)$/i:/^(text|password|datetime|email|number|search|tel|url|image)$/i).test(e.type)},e.isEditableElement=function(e,t){return t?d(e)||h(e):f(e)||h(e)},e.isElementContainsNode=function(e,t){var o=!1;return function e(t,n){(o||R(n,t))&&(o=!0);for(var r=0;r<t.childNodes.length;r++)if(o=e(t.childNodes[r],n))return o;return o}(e,t)},e.isOptionGroupElement=function(e){return"[object HTMLOptGroupElement]"===i.default.utils.dom.instanceToString(e)},e.getElementIndexInParent=function(e,t){var n=e.querySelectorAll(b(t));return m.indexOf(n,t)},e.isTheSameNode=R,e.getElementDescription=function(e){var t={id:"id",name:"name",class:"className"},n=[];for(var r in n.push("<"),n.push(b(e)),t)if(t.hasOwnProperty(r)){var o=e[t[r]];o&&n.push(" "+r+'="'+o+'"')}return n.push(">"),n.join("")},e.getFocusableParent=function(e){for(var t=_(e),n=0;n<t.length;n++)if(S(t[n]))return t[n];return null},e.remove=function(e){e&&e.parentElement&&e.parentElement.removeChild(e)},e.isIFrameWindowInDOM=function(t){if(!t.setTimeout)return!1;var e=null;try{e=t.frameElement}catch(e){return!!t.top}return!(!E.isFirefox&&!E.isWebKit||t.top===t||e)||!(!e||!c.contentDocumentGetter.call(e))},e.isTopWindow=function(e){try{return e.top===e}catch(e){return!1}},e.findIframeByWindow=function(e,t){for(var n=(t||F).document.getElementsByTagName("iframe"),r=0;r<n.length;r++)if(c.contentWindowGetter.call(n[r])===e)return n[r];return null},e.isEditableFormElement=function(e){return f(e)||u(e)},e.getCommonAncestor=function(e,t){if(R(e,t))return e;for(var n=[e].concat(_(e)),r=t;r;){if(-1<m.indexOf(n,r))return r;r=r.parentNode}return r},e.getChildrenLength=function(e){return c.htmlCollectionLengthGetter.call(e)},e.getChildNodesLength=function(e){return c.nodeListLengthGetter.call(e)},e.getInputValue=I,e.getTextAreaValue=M,e.setInputValue=U,e.setTextAreaValue=N,e.getElementValue=function(e){return l(e)?I(e):a(e)?M(e):e.value},e.setElementValue=function(e,t){return l(e)?U(e,t):a(e)?N(e,t):e.value=t};var r,o=n("../deps/hammerhead"),i=(r=o)&&r.__esModule?r:{default:r},p=s(n("./style")),m=s(n("./array"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var E=i.default.utils.browser,c=i.default.nativeMethods,g=(e.getActiveElement=i.default.utils.dom.getActiveElement,e.findDocument=i.default.utils.dom.findDocument,e.isElementInDocument=i.default.utils.dom.isElementInDocument,e.isElementInIframe=i.default.utils.dom.isElementInIframe,e.getIframeByElement=i.default.utils.dom.getIframeByElement,e.isCrossDomainWindows=i.default.utils.dom.isCrossDomainWindows,e.getSelectParent=i.default.utils.dom.getSelectParent,e.getChildVisibleIndex=i.default.utils.dom.getChildVisibleIndex,e.getSelectVisibleChildren=i.default.utils.dom.getSelectVisibleChildren,e.isElementNode=i.default.utils.dom.isElementNode,e.isTextNode=i.default.utils.dom.isTextNode,e.isRenderedNode=i.default.utils.dom.isRenderedNode,e.isIframeElement=i.default.utils.dom.isIframeElement),l=e.isInputElement=i.default.utils.dom.isInputElement,a=(e.isButtonElement=i.default.utils.dom.isButtonElement,e.isFileInput=i.default.utils.dom.isFileInput,e.isTextAreaElement=i.default.utils.dom.isTextAreaElement),v=e.isAnchorElement=i.default.utils.dom.isAnchorElement,u=(e.isImgElement=i.default.utils.dom.isImgElement,e.isFormElement=i.default.utils.dom.isFormElement,e.isSelectElement=i.default.utils.dom.isSelectElement),y=e.isOptionElement=i.default.utils.dom.isOptionElement,f=(e.isSVGElement=i.default.utils.dom.isSVGElement,e.isMapElement=i.default.utils.dom.isMapElement,e.isBodyElement=i.default.utils.dom.isBodyElement,e.isHtmlElement=i.default.utils.dom.isHtmlElement,e.isDocument=i.default.utils.dom.isDocument,e.isWindow=i.default.utils.dom.isWindow,e.isTextEditableInput=i.default.utils.dom.isTextEditableInput,e.isTextEditableElement=i.default.utils.dom.isTextEditableElement),d=e.isTextEditableElementAndEditingAllowed=i.default.utils.dom.isTextEditableElementAndEditingAllowed,h=e.isContentEditableElement=i.default.utils.dom.isContentEditableElement,S=(e.isDomElement=i.default.utils.dom.isDomElement,e.isShadowUIElement=i.default.utils.dom.isShadowUIElement,e.isElementFocusable=i.default.utils.dom.isElementFocusable),b=(e.isHammerheadAttr=i.default.utils.dom.isHammerheadAttr,e.isElementReadOnly=i.default.utils.dom.isElementReadOnly,e.getScrollbarSize=i.default.utils.dom.getScrollbarSize,e.getMapContainer=i.default.utils.dom.getMapContainer,e.getTagName=i.default.utils.dom.getTagName),_=(e.closest=i.default.utils.dom.closest,e.getParents=i.default.utils.dom.getParents);function T(e){return m.filter(e,function(e){return 0<e.tabIndex})}function A(e){return m.filter(e,function(e){return e.tabIndex<=0})}function x(e){if(!e||!e.length)return[];var t=T(e),n=m.filter(e,function(e){return g(e)});if(!t.length)return n.length&&(e=w(e,n)),e;t=t.sort(P("tabIndex"));var r=A(e);return n.length?w(t,n).concat(w(r,n)):t.concat(r)}function w(e,t){var n=function(e){var t=T(e);return t.length?t.sort(P("tabIndex")).concat(A(e)):e}(t),r=[],o=[],i=[],s=0;for(s=0;s<n.length;s++){try{i=C(c.contentDocumentGetter.call(n[s]))}catch(e){i=[]}o.push(x(i))}for(s=0;s<e.length;s++)if(r.push(e[s]),g(e[s]))if(E.isIE){r.pop();var l=o[m.indexOf(t,e[s])],a=T(l),u=A(l);a=a.sort(P("tabIndex")),(r=r.concat(a)).push(e[s]),r=r.concat(u)}else E.isWebKit&&o[m.indexOf(t,e[s])].length&&r.pop(),r=r.concat(o[m.indexOf(t,e[s])]);return r}function P(n){return function(e,t){return e[n]<t[n]?-1:e[n]>t[n]?1:0}}function C(e){for(var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=e.querySelectorAll("*"),r=function(e){for(var t=[],n=0;n<e.length;n++)"none"===p.get(e[n],"display")&&t.push(e[n]);return t}(n),o=/^(input|button|select|textarea)$/,i=[],s=null,l=null,a=null,u=!1,c=0;c<n.length;c++)if(s=n[c],l=b(s),d=void 0,null!==(d=s.getAttribute("tabIndex"))&&(d=parseInt(d,10),d=isNaN(d)?null:d),a=d,u=!1,!s.disabled&&"none"!==p.get(s,"display")&&"hidden"!==p.get(s,"visibility")&&!((E.isIE||E.isAndroid)&&y(s)||null!==a&&a<0)){o.test(l)?u=!0:E.isIE&&g(s)?i.push(s):v(s)&&s.hasAttribute("href")&&(u=""!==s.getAttribute("href")||!E.isIE||null!==a);var f=s.getAttribute("contenteditable");""!==f&&"true"!==f||(u=!0),null!==a&&(u=!0),u&&i.push(s)}var d,h=m.filter(i,function(e){return!O(r,e)});return t&&(h=x(h)),h}function O(e,t){return e.contains?e.contains(t):m.some(e,function(e){return e.contains(t)})}function R(e,t){return e&&t&&e.isSameNode?e.isSameNode(t):e===t}function I(e){return c.inputValueGetter.call(e)}function M(e){return c.textAreaValueGetter.call(e)}function U(e,t){return c.inputValueSetter.call(e,t)}function N(e,t){return c.textAreaValueSetter.call(e,t)}e.findParent=i.default.utils.dom.findParent,e.getTopSameDomainWindow=i.default.utils.dom.getTopSameDomainWindow,e.isRadioButtonElement=function(e){return l(e)&&"radio"===e.type}},"style.js":function(e,t,n){e.__esModule=!0,e.get=e.setScrollTop=e.setScrollLeft=e.getScrollTop=e.getScrollLeft=e.getInnerHeight=e.getInnerWidth=e.getHeight=e.getWidth=e.isSelectVisibleChild=e.isElementVisible=e.getSelectElementSize=e.getOptionHeight=e.getElementScroll=e.getElementPadding=e.getElementMargin=e.getComputedStyle=e.getBordersWidth=void 0,e.isFixedElement=function(e){return s.isElementNode(e)&&"fixed"===c(e,"position")},e.isNotVisibleNode=function(e){return!s.isRenderedNode(e)||m(e)||p(e)},e.getScrollableParents=function(e){var t=s.getParents(e);if(s.isElementInIframe(e)){var n=s.getParents(s.getIframeByElement(e));t.concat(n)}return(0,l.filter)(t,g)},e.hasScroll=g,e.hasDimensions=function(e){return e&&!(e.offsetHeight<=0&&e.offsetWidth<=0)},e.set=function(e,t,n){for(var r in"string"==typeof t&&a.set(e,t,n),t)t.hasOwnProperty(r)&&a.set(e,r,t[r])},e.getViewportDimensions=function(){return{width:v(F.innerWidth,j.documentElement.clientWidth,j.body.clientWidth),height:v(F.innerHeight,j.documentElement.clientHeight,j.body.clientHeight)}};var r,o=n("../deps/hammerhead"),i=(r=o)&&r.__esModule?r:{default:r},s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("./dom")),l=n("./array"),a=i.default.utils.style,u=i.default.utils.browser,c=(e.getBordersWidth=i.default.utils.style.getBordersWidth,e.getComputedStyle=i.default.utils.style.getComputedStyle,e.getElementMargin=i.default.utils.style.getElementMargin,e.getElementPadding=i.default.utils.style.getElementPadding,e.getElementScroll=i.default.utils.style.getElementScroll,e.getOptionHeight=i.default.utils.style.getOptionHeight,e.getSelectElementSize=i.default.utils.style.getSelectElementSize,e.isElementVisible=i.default.utils.style.isElementVisible,e.isSelectVisibleChild=i.default.utils.style.isVisibleChild,e.getWidth=i.default.utils.style.getWidth,e.getHeight=i.default.utils.style.getHeight,e.getInnerWidth=i.default.utils.style.getInnerWidth,e.getInnerHeight=i.default.utils.style.getInnerHeight,e.getScrollLeft=i.default.utils.style.getScrollLeft,e.getScrollTop=i.default.utils.style.getScrollTop,e.setScrollLeft=i.default.utils.style.setScrollLeft,e.setScrollTop=i.default.utils.style.setScrollTop,e.get=i.default.utils.style.get),f=/auto|scroll/i,d="visible",h=function(e){var t=c(e,"overflowX"),n=c(e,"overflowY"),r=f.test(t),o=f.test(n);return u.isIE&&(r=r||o&&t===d,o=o||r&&n===d),{scrollableHorizontally:r,scrollableVertically:o}},p=function(e){return!!(e=s.findParent(e,!0,function(e){return s.isElementNode(e)&&"hidden"===c(e,"visibility")}))},m=function(e){return!!(e=s.findParent(e,!0,function(e){return s.isElementNode(e)&&"none"===c(e,"display")}))};function E(e){var t=c(e,"overflowX"),n=c(e,"overflowY"),r=f.test(t),o=f.test(n),i=s.findDocument(e).documentElement;return(r||o)&&e.scrollHeight>i.scrollHeight}function g(e){var t=h(e),n=t.scrollableHorizontally,r=t.scrollableVertically;if(s.isBodyElement(e))return E(e);if(s.isHtmlElement(e))return function(e){var t=c(e,"overflowX"),n=c(e,"overflowY"),r=e.getElementsByTagName("body")[0];if("hidden"===t&&"hidden"===n)return!1;var o=e.scrollHeight>e.clientHeight,i=e.scrollWidth>e.clientWidth;if(o||i)return!0;if(r){if(E(r))return!1;var s=Math.min(e.clientWidth,r.clientWidth),l=Math.min(e.clientHeight,r.clientHeight);return r.scrollHeight>l||r.scrollWidth>s}return!1}(e);if(!n&&!r)return!1;var o=r&&e.scrollHeight>e.clientHeight;return n&&e.scrollWidth>e.clientWidth||o}function v(e,t,n){return e<t?n:e<n?t:Math.max(n,t)}}}}},errors:{"test-run":{"index.js":function(e,t,n){e.__esModule=!0,e.SetNativeDialogHandlerCodeWrongTypeError=e.UncaughtErrorInNativeDialogHandler=e.NativeDialogNotHandledError=e.CurrentIframeIsInvisibleError=e.CurrentIframeNotFoundError=e.CurrentIframeIsNotLoadedError=e.ActionIframeIsNotLoadedError=e.ActionElementNotIframeError=e.RoleSwitchInRoleInitializerError=e.ForbiddenCharactersInScreenshotPathError=e.InvalidElementScreenshotDimensionsError=e.WindowDimensionsOverflowError=e.ActionInvalidScrollTargetError=e.ActionElementIsNotFileInputError=e.ActionCannotFindFileToUploadError=e.ActionIncorrectKeysError=e.ActionRootContainerNotFoundError=e.ActionElementNonContentEditableError=e.ActionElementNotTextAreaError=e.ActionElementNonEditableError=e.ActionAdditionalSelectorMatchesWrongNodeTypeError=e.ActionAdditionalElementIsInvisibleError=e.ActionAdditionalElementNotFoundError=e.ActionSelectorMatchesWrongNodeTypeError=e.ActionElementIsInvisibleError=e.ActionElementNotFoundError=e.ActionSelectorError=e.ActionUnsupportedDeviceTypeError=e.SetTestSpeedArgumentError=e.ActionStringArrayElementError=e.ActionStringOrStringArrayArgumentError=e.ActionPositiveIntegerArgumentError=e.ActionRoleArgumentError=e.ActionIntegerArgumentError=e.ActionNullableStringArgumentError=e.ActionStringArgumentError=e.ActionOptionsTypeError=e.ActionSpeedOptionError=e.ActionBooleanArgumentError=e.ActionBooleanOptionError=e.ActionPositiveIntegerOptionError=e.ActionIntegerOptionError=e.AssertionUnawaitedPromiseError=e.AssertionWithoutMethodCallError=e.AssertionExecutableArgumentError=e.ExternalAssertionLibraryError=e.UncaughtExceptionError=e.UnhandledPromiseRejectionError=e.UncaughtErrorInCustomDOMPropertyCode=e.UncaughtErrorInClientFunctionCode=e.UncaughtNonErrorObjectInTestCode=e.UncaughtErrorInTestCode=e.UncaughtErrorOnPage=e.PageLoadError=e.CannotObtainInfoForElementSpecifiedBySelectorError=e.InvalidSelectorResultError=e.DomNodeClientFunctionResultError=e.ClientFunctionExecutionInterruptionError=e.MissingAwaitError=void 0;var l=n("../types");function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function e(t){c(this,e),this.code=t,this.isTestCafeError=!0,this.callsite=null},o=function(o){function i(e,t,n){c(this,i);var r=a(this,o.call(this,e));return r.optionName=t,r.actualValue=n,r}return u(i,o),i}(r),i=function(o){function i(e,t,n){c(this,i);var r=a(this,o.call(this,e));return r.argumentName=t,r.actualValue=n,r}return u(i,o),i}(r),s=(e.MissingAwaitError=function(n){function r(e){c(this,r);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.missingAwaitError));return t.callsite=e,t}return u(r,n),r}(r),e.ClientFunctionExecutionInterruptionError=function(n){function r(e){c(this,r);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.clientFunctionExecutionInterruptionError));return t.instantiationCallsiteName=e,t}return u(r,n),r}(r),e.DomNodeClientFunctionResultError=function(n){function r(e){c(this,r);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.domNodeClientFunctionResultError));return t.instantiationCallsiteName=e,t}return u(r,n),r}(r),function(i){function s(e,t){var n=t.apiFnChain,r=t.apiFnIndex;c(this,s);var o=a(this,i.call(this,e));return o.apiFnChain=n,o.apiFnIndex=r,o}return u(s,i),s}(r));e.InvalidSelectorResultError=function(e){function t(){return c(this,t),a(this,e.call(this,l.TEST_RUN_ERRORS.invalidSelectorResultError))}return u(t,e),t}(r),e.CannotObtainInfoForElementSpecifiedBySelectorError=function(r){function o(e,t){c(this,o);var n=a(this,r.call(this,l.TEST_RUN_ERRORS.cannotObtainInfoForElementSpecifiedBySelectorError,t));return n.callsite=e,n}return u(o,r),o}(s),e.PageLoadError=function(n){function r(e){c(this,r);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.pageLoadError));return t.errMsg=e,t}return u(r,n),r}(r),e.UncaughtErrorOnPage=function(r){function o(e,t){c(this,o);var n=a(this,r.call(this,l.TEST_RUN_ERRORS.uncaughtErrorOnPage));return n.errStack=e,n.pageDestUrl=t,n}return u(o,r),o}(r),e.UncaughtErrorInTestCode=function(r){function o(e,t){c(this,o);var n=a(this,r.call(this,l.TEST_RUN_ERRORS.uncaughtErrorInTestCode));return n.errMsg=String(e.rawMessage||e),n.callsite=e.callsite||t,n.originError=e,n}return u(o,r),o}(r),e.UncaughtNonErrorObjectInTestCode=function(n){function r(e){c(this,r);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.uncaughtNonErrorObjectInTestCode));return t.objType=typeof e,t.objStr=String(e),t}return u(r,n),r}(r),e.UncaughtErrorInClientFunctionCode=function(r){function o(e,t){c(this,o);var n=a(this,r.call(this,l.TEST_RUN_ERRORS.uncaughtErrorInClientFunctionCode));return n.errMsg=String(t),n.instantiationCallsiteName=e,n}return u(o,r),o}(r),e.UncaughtErrorInCustomDOMPropertyCode=function(o){function i(e,t,n){c(this,i);var r=a(this,o.call(this,l.TEST_RUN_ERRORS.uncaughtErrorInCustomDOMPropertyCode,t,n));return r.errMsg=String(t),r.property=n,r.instantiationCallsiteName=e,r}return u(i,o),i}(r),e.UnhandledPromiseRejectionError=function(n){function r(e){c(this,r);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.unhandledPromiseRejection));return t.errMsg=String(e),t}return u(r,n),r}(r),e.UncaughtExceptionError=function(n){function r(e){c(this,r);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.uncaughtException));return t.errMsg=String(e),t}return u(r,n),r}(r),e.ExternalAssertionLibraryError=function(r){function o(e,t){c(this,o);var n=a(this,r.call(this,l.TEST_RUN_ERRORS.externalAssertionLibraryError));return n.errMsg=String(e),n.callsite=t,n}return u(o,r),o}(r),e.AssertionExecutableArgumentError=function(i){function s(e,t,n,r){c(this,s);var o=a(this,i.call(this,l.TEST_RUN_ERRORS.assertionExecutableArgumentError,e,t));return o.errMsg=r?n.rawMessage:n.message,o.originError=n,o}return u(s,i),s}(i),e.AssertionWithoutMethodCallError=function(n){function r(e){c(this,r);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.assertionWithoutMethodCallError));return t.callsite=e,t}return u(r,n),r}(r),e.AssertionUnawaitedPromiseError=function(n){function r(e){c(this,r);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.assertionUnawaitedPromiseError));return t.callsite=e,t}return u(r,n),r}(r),e.ActionIntegerOptionError=function(n){function r(e,t){return c(this,r),a(this,n.call(this,l.TEST_RUN_ERRORS.actionIntegerOptionError,e,t))}return u(r,n),r}(o),e.ActionPositiveIntegerOptionError=function(n){function r(e,t){return c(this,r),a(this,n.call(this,l.TEST_RUN_ERRORS.actionPositiveIntegerOptionError,e,t))}return u(r,n),r}(o),e.ActionBooleanOptionError=function(n){function r(e,t){return c(this,r),a(this,n.call(this,l.TEST_RUN_ERRORS.actionBooleanOptionError,e,t))}return u(r,n),r}(o),e.ActionBooleanArgumentError=function(n){function r(e,t){return c(this,r),a(this,n.call(this,l.TEST_RUN_ERRORS.actionBooleanArgumentError,e,t))}return u(r,n),r}(i),e.ActionSpeedOptionError=function(n){function r(e,t){return c(this,r),a(this,n.call(this,l.TEST_RUN_ERRORS.actionSpeedOptionError,e,t))}return u(r,n),r}(o),e.ActionOptionsTypeError=function(n){function r(e){c(this,r);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.actionOptionsTypeError));return t.actualType=e,t}return u(r,n),r}(r),e.ActionStringArgumentError=function(n){function r(e,t){return c(this,r),a(this,n.call(this,l.TEST_RUN_ERRORS.actionStringArgumentError,e,t))}return u(r,n),r}(i),e.ActionNullableStringArgumentError=function(n){function r(e,t){return c(this,r),a(this,n.call(this,l.TEST_RUN_ERRORS.actionNullableStringArgumentError,e,t))}return u(r,n),r}(i),e.ActionIntegerArgumentError=function(n){function r(e,t){return c(this,r),a(this,n.call(this,l.TEST_RUN_ERRORS.actionIntegerArgumentError,e,t))}return u(r,n),r}(i),e.ActionRoleArgumentError=function(n){function r(e,t){return c(this,r),a(this,n.call(this,l.TEST_RUN_ERRORS.actionRoleArgumentError,e,t))}return u(r,n),r}(i),e.ActionPositiveIntegerArgumentError=function(n){function r(e,t){return c(this,r),a(this,n.call(this,l.TEST_RUN_ERRORS.actionPositiveIntegerArgumentError,e,t))}return u(r,n),r}(i),e.ActionStringOrStringArrayArgumentError=function(n){function r(e,t){return c(this,r),a(this,n.call(this,l.TEST_RUN_ERRORS.actionStringOrStringArrayArgumentError,e,t))}return u(r,n),r}(i),e.ActionStringArrayElementError=function(o){function i(e,t,n){c(this,i);var r=a(this,o.call(this,l.TEST_RUN_ERRORS.actionStringArrayElementError,e,t));return r.elementIndex=n,r}return u(i,o),i}(i),e.SetTestSpeedArgumentError=function(n){function r(e,t){return c(this,r),a(this,n.call(this,l.TEST_RUN_ERRORS.setTestSpeedArgumentError,e,t))}return u(r,n),r}(i),e.ActionUnsupportedDeviceTypeError=function(n){function r(e,t){return c(this,r),a(this,n.call(this,l.TEST_RUN_ERRORS.actionUnsupportedDeviceTypeError,e,t))}return u(r,n),r}(i),e.ActionSelectorError=function(o){function i(e,t,n){c(this,i);var r=a(this,o.call(this,l.TEST_RUN_ERRORS.actionSelectorError));return r.selectorName=e,r.errMsg=n?t.rawMessage:t.message,r.originError=t,r}return u(i,o),i}(r),e.ActionElementNotFoundError=function(t){function n(e){return c(this,n),a(this,t.call(this,l.TEST_RUN_ERRORS.actionElementNotFoundError,e))}return u(n,t),n}(s),e.ActionElementIsInvisibleError=function(e){function t(){return c(this,t),a(this,e.call(this,l.TEST_RUN_ERRORS.actionElementIsInvisibleError))}return u(t,e),t}(r),e.ActionSelectorMatchesWrongNodeTypeError=function(n){function r(e){c(this,r);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.actionSelectorMatchesWrongNodeTypeError));return t.nodeDescription=e,t}return u(r,n),r}(r),e.ActionAdditionalElementNotFoundError=function(r){function o(e,t){c(this,o);var n=a(this,r.call(this,l.TEST_RUN_ERRORS.actionAdditionalElementNotFoundError,t));return n.argumentName=e,n}return u(o,r),o}(s),e.ActionAdditionalElementIsInvisibleError=function(n){function r(e){c(this,r);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.actionAdditionalElementIsInvisibleError));return t.argumentName=e,t}return u(r,n),r}(r),e.ActionAdditionalSelectorMatchesWrongNodeTypeError=function(r){function o(e,t){c(this,o);var n=a(this,r.call(this,l.TEST_RUN_ERRORS.actionAdditionalSelectorMatchesWrongNodeTypeError));return n.argumentName=e,n.nodeDescription=t,n}return u(o,r),o}(r),e.ActionElementNonEditableError=function(e){function t(){return c(this,t),a(this,e.call(this,l.TEST_RUN_ERRORS.actionElementNonEditableError))}return u(t,e),t}(r),e.ActionElementNotTextAreaError=function(e){function t(){return c(this,t),a(this,e.call(this,l.TEST_RUN_ERRORS.actionElementNotTextAreaError))}return u(t,e),t}(r),e.ActionElementNonContentEditableError=function(n){function r(e){c(this,r);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.actionElementNonContentEditableError));return t.argumentName=e,t}return u(r,n),r}(r),e.ActionRootContainerNotFoundError=function(e){function t(){return c(this,t),a(this,e.call(this,l.TEST_RUN_ERRORS.actionRootContainerNotFoundError))}return u(t,e),t}(r),e.ActionIncorrectKeysError=function(n){function r(e){c(this,r);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.actionIncorrectKeysError));return t.argumentName=e,t}return u(r,n),r}(r),e.ActionCannotFindFileToUploadError=function(n){function r(e){c(this,r);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.actionCannotFindFileToUploadError));return t.filePaths=e,t}return u(r,n),r}(r),e.ActionElementIsNotFileInputError=function(e){function t(){return c(this,t),a(this,e.call(this,l.TEST_RUN_ERRORS.actionElementIsNotFileInputError))}return u(t,e),t}(r),e.ActionInvalidScrollTargetError=function(r){function o(e,t){c(this,o);var n=a(this,r.call(this,l.TEST_RUN_ERRORS.actionInvalidScrollTargetError));return n.properties=e?"scrollTargetY property":t?"scrollTargetX property":"scrollTargetX and scrollTargetY properties",n}return u(o,r),o}(r),e.WindowDimensionsOverflowError=function(n){function r(e){c(this,r);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.windowDimensionsOverflowError));return t.callsite=e,t}return u(r,n),r}(r),e.InvalidElementScreenshotDimensionsError=function(r){function o(e,t){c(this,o);var n=a(this,r.call(this,l.TEST_RUN_ERRORS.invalidElementScreenshotDimensionsError));return e<=0?t<=0?(n.verb="are",n.dimensions="width and height"):(n.verb="is",n.dimensions="width"):(n.verb="is",n.dimensions="height"),n}return u(o,r),o}(r),e.ForbiddenCharactersInScreenshotPathError=function(r){function o(e,t){c(this,o);var n=a(this,r.call(this,l.TEST_RUN_ERRORS.forbiddenCharactersInScreenshotPathError));return n.screenshotPath=e,n.forbiddenCharsList=t,n}return u(o,r),o}(r),e.RoleSwitchInRoleInitializerError=function(n){function r(e){c(this,r);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.roleSwitchInRoleInitializerError));return t.callsite=e,t}return u(r,n),r}(r),e.ActionElementNotIframeError=function(e){function t(){return c(this,t),a(this,e.call(this,l.TEST_RUN_ERRORS.actionElementNotIframeError))}return u(t,e),t}(r),e.ActionIframeIsNotLoadedError=function(e){function t(){return c(this,t),a(this,e.call(this,l.TEST_RUN_ERRORS.actionIframeIsNotLoadedError))}return u(t,e),t}(r),e.CurrentIframeIsNotLoadedError=function(e){function t(){return c(this,t),a(this,e.call(this,l.TEST_RUN_ERRORS.currentIframeIsNotLoadedError))}return u(t,e),t}(r),e.CurrentIframeNotFoundError=function(e){function t(){return c(this,t),a(this,e.call(this,l.TEST_RUN_ERRORS.currentIframeNotFoundError))}return u(t,e),t}(r),e.CurrentIframeIsInvisibleError=function(e){function t(){return c(this,t),a(this,e.call(this,l.TEST_RUN_ERRORS.currentIframeIsInvisibleError))}return u(t,e),t}(r),e.NativeDialogNotHandledError=function(r){function o(e,t){c(this,o);var n=a(this,r.call(this,l.TEST_RUN_ERRORS.nativeDialogNotHandledError));return n.dialogType=e,n.pageUrl=t,n}return u(o,r),o}(r),e.UncaughtErrorInNativeDialogHandler=function(o){function i(e,t,n){c(this,i);var r=a(this,o.call(this,l.TEST_RUN_ERRORS.uncaughtErrorInNativeDialogHandler));return r.dialogType=e,r.errMsg=t,r.pageUrl=n,r}return u(i,o),i}(r),e.SetNativeDialogHandlerCodeWrongTypeError=function(n){function r(e){c(this,r);var t=a(this,n.call(this,l.TEST_RUN_ERRORS.setNativeDialogHandlerCodeWrongTypeError));return t.actualType=e,t}return u(r,n),r}(r)}},"types.js":function(e,t,n){e.__esModule=!0,e.TEST_RUN_ERRORS={uncaughtErrorOnPage:"E1",uncaughtErrorInTestCode:"E2",uncaughtNonErrorObjectInTestCode:"E3",uncaughtErrorInClientFunctionCode:"E4",uncaughtErrorInCustomDOMPropertyCode:"E5",unhandledPromiseRejection:"E6",uncaughtException:"E7",missingAwaitError:"E8",actionIntegerOptionError:"E9",actionPositiveIntegerOptionError:"E10",actionBooleanOptionError:"E11",actionSpeedOptionError:"E12",actionOptionsTypeError:"E14",actionBooleanArgumentError:"E15",actionStringArgumentError:"E16",actionNullableStringArgumentError:"E17",actionStringOrStringArrayArgumentError:"E18",actionStringArrayElementError:"E19",actionIntegerArgumentError:"E20",actionRoleArgumentError:"E21",actionPositiveIntegerArgumentError:"E22",actionSelectorError:"E23",actionElementNotFoundError:"E24",actionElementIsInvisibleError:"E26",actionSelectorMatchesWrongNodeTypeError:"E27",actionAdditionalElementNotFoundError:"E28",actionAdditionalElementIsInvisibleError:"E29",actionAdditionalSelectorMatchesWrongNodeTypeError:"E30",actionElementNonEditableError:"E31",actionElementNotTextAreaError:"E32",actionElementNonContentEditableError:"E33",actionElementIsNotFileInputError:"E34",actionRootContainerNotFoundError:"E35",actionIncorrectKeysError:"E36",actionCannotFindFileToUploadError:"E37",actionUnsupportedDeviceTypeError:"E38",actionIframeIsNotLoadedError:"E39",actionElementNotIframeError:"E40",actionInvalidScrollTargetError:"E41",currentIframeIsNotLoadedError:"E42",currentIframeNotFoundError:"E43",currentIframeIsInvisibleError:"E44",nativeDialogNotHandledError:"E45",uncaughtErrorInNativeDialogHandler:"E46",setTestSpeedArgumentError:"E47",setNativeDialogHandlerCodeWrongTypeError:"E48",clientFunctionExecutionInterruptionError:"E49",domNodeClientFunctionResultError:"E50",invalidSelectorResultError:"E51",cannotObtainInfoForElementSpecifiedBySelectorError:"E52",externalAssertionLibraryError:"E53",pageLoadError:"E54",windowDimensionsOverflowError:"E55",forbiddenCharactersInScreenshotPathError:"E56",invalidElementScreenshotDimensionsError:"E57",roleSwitchInRoleInitializerError:"E58",assertionExecutableArgumentError:"E59",assertionWithoutMethodCallError:"E60",assertionUnawaitedPromiseError:"E61"},e.RUNTIME_ERRORS={cannotCreateMultipleLiveModeRunners:"E1000",cannotRunLiveModeRunnerMultipleTimes:"E1001",browserDisconnected:"E1002",cannotRunAgainstDisconnectedBrowsers:"E1003",cannotEstablishBrowserConnection:"E1004",cannotFindBrowser:"E1005",browserProviderNotFound:"E1006",browserNotSet:"E1007",testSourcesNotSet:"E1008",noTestsToRun:"E1009",cannotFindReporterForAlias:"E1010",multipleStdoutReporters:"E1011",optionValueIsNotValidRegExp:"E1012",optionValueIsNotValidKeyValue:"E1013",invalidSpeedValue:"E1014",invalidConcurrencyFactor:"E1015",cannotDivideRemotesCountByConcurrency:"E1016",portsOptionRequiresTwoNumbers:"E1017",portIsNotFree:"E1018",invalidHostname:"E1019",cannotFindSpecifiedTestSource:"E1020",clientFunctionCodeIsNotAFunction:"E1021",selectorInitializedWithWrongType:"E1022",clientFunctionCannotResolveTestRun:"E1023",regeneratorInClientFunctionCode:"E1024",invalidClientFunctionTestRunBinding:"E1025",invalidValueType:"E1026",unsupportedUrlProtocol:"E1027",testControllerProxyCannotResolveTestRun:"E1028",timeLimitedPromiseTimeoutExpired:"E1029",cannotUseScreenshotPathPatternWithoutBaseScreenshotPathSpecified:"E1030",cannotSetVideoOptionsWithoutBaseVideoPathSpecified:"E1031",multipleAPIMethodCallForbidden:"E1032",invalidReporterOutput:"E1033",cannotReadSSLCertFile:"E1034",cannotPrepareTestsDueToError:"E1035",cannotParseRawFile:"E1036",testedAppFailedWithError:"E1037",unableToOpenBrowser:"E1038",requestHookConfigureAPIError:"E1039",forbiddenCharatersInScreenshotPath:"E1040",cannotFindFFMPEG:"E1041",compositeArgumentsError:"E1042"}}},"test-run":{commands:{"options.js":function(e,t,n){e.__esModule=!0,e.AssertionOptions=e.ResizeToFitDeviceOptions=e.DragToElementOptions=e.TypeOptions=e.MoveOptions=e.ClickOptions=e.MouseOptions=e.ElementScreenshotOptions=e.ScrollOptions=e.OffsetOptions=e.ActionOptions=e.speedOption=e.booleanOption=e.positiveIntegerOption=e.integerOption=void 0;var r,o=n("../../utils/assignable"),i=(r=o)&&r.__esModule?r:{default:r},s=n("./validations/factories"),l=n("../../errors/test-run");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=e.integerOption=(0,s.createIntegerValidator)(l.ActionIntegerOptionError),d=e.positiveIntegerOption=(0,s.createPositiveIntegerValidator)(l.ActionPositiveIntegerOptionError),h=e.booleanOption=(0,s.createBooleanValidator)(l.ActionBooleanOptionError),p=e.speedOption=(0,s.createSpeedValidator)(l.ActionSpeedOptionError),m=e.ActionOptions=function(r){function o(e,t){a(this,o);var n=u(this,r.call(this));return n.speed=null,n._assignFrom(e,t),n}return c(o,r),o.prototype._getAssignableProperties=function(){return[{name:"speed",type:p}]},o}(i.default),E=e.OffsetOptions=function(r){function o(e,t){a(this,o);var n=u(this,r.call(this));return n.offsetX=null,n.offsetY=null,n._assignFrom(e,t),n}return c(o,r),o.prototype._getAssignableProperties=function(){return r.prototype._getAssignableProperties.call(this).concat([{name:"offsetX",type:f},{name:"offsetY",type:f}])},o}(m),g=(e.ScrollOptions=function(r){function o(e,t){a(this,o);var n=u(this,r.call(this));return n.scrollToCenter=!1,n.skipParentFrames=!1,n._assignFrom(e,t),n}return c(o,r),o.prototype._getAssignableProperties=function(){return r.prototype._getAssignableProperties.call(this).concat([{name:"scrollToCenter",type:h},{name:"skipParentFrames",type:h}])},o}(E),e.ElementScreenshotOptions=function(r){function o(e,t){a(this,o);var n=u(this,r.call(this));return n.scrollTargetX=null,n.scrollTargetY=null,n.includeMargins=!1,n.includeBorders=!0,n.includePaddings=!0,n.crop={left:null,right:null,top:null,bottom:null},n._assignFrom(e,t),n}return c(o,r),o.prototype._getAssignableProperties=function(){return r.prototype._getAssignableProperties.call(this).concat([{name:"scrollTargetX",type:f},{name:"scrollTargetY",type:f},{name:"crop.left",type:f},{name:"crop.right",type:f},{name:"crop.top",type:f},{name:"crop.bottom",type:f},{name:"includeMargins",type:h},{name:"includeBorders",type:h},{name:"includePaddings",type:h}])},o}(m),e.MouseOptions=function(r){function o(e,t){a(this,o);var n=u(this,r.call(this));return n.modifiers={ctrl:!1,alt:!1,shift:!1,meta:!1},n._assignFrom(e,t),n}return c(o,r),o.prototype._getAssignableProperties=function(){return r.prototype._getAssignableProperties.call(this).concat([{name:"modifiers.ctrl",type:h},{name:"modifiers.alt",type:h},{name:"modifiers.shift",type:h},{name:"modifiers.meta",type:h}])},o}(E)),v=e.ClickOptions=function(r){function o(e,t){a(this,o);var n=u(this,r.call(this));return n.caretPos=null,n._assignFrom(e,t),n}return c(o,r),o.prototype._getAssignableProperties=function(){return r.prototype._getAssignableProperties.call(this).concat([{name:"caretPos",type:d}])},o}(g);e.MoveOptions=function(r){function o(e,t){a(this,o);var n=u(this,r.call(this));return n.speed=null,n.minMovingTime=null,n.holdLeftButton=!1,n.skipScrolling=!1,n.skipDefaultDragBehavior=!1,n._assignFrom(e,t),n}return c(o,r),o.prototype._getAssignableProperties=function(){return r.prototype._getAssignableProperties.call(this).concat([{name:"speed"},{name:"minMovingTime"},{name:"holdLeftButton"},{name:"skipScrolling",type:h},{name:"skipDefaultDragBehavior",type:h}])},o}(g),e.TypeOptions=function(r){function o(e,t){a(this,o);var n=u(this,r.call(this));return n.replace=!1,n.paste=!1,n._assignFrom(e,t),n}return c(o,r),o.prototype._getAssignableProperties=function(){return r.prototype._getAssignableProperties.call(this).concat([{name:"replace",type:h},{name:"paste",type:h}])},o}(v),e.DragToElementOptions=function(r){function o(e,t){a(this,o);var n=u(this,r.call(this,e,t));return n.destinationOffsetX=null,n.destinationOffsetY=null,n._assignFrom(e,t),n}return c(o,r),o.prototype._getAssignableProperties=function(){return r.prototype._getAssignableProperties.call(this).concat([{name:"destinationOffsetX",type:f},{name:"destinationOffsetY",type:f}])},o}(g),e.ResizeToFitDeviceOptions=function(r){function o(e,t){a(this,o);var n=u(this,r.call(this));return n.portraitOrientation=!1,n._assignFrom(e,t),n}return c(o,r),o.prototype._getAssignableProperties=function(){return[{name:"portraitOrientation",type:h}]},o}(i.default),e.AssertionOptions=function(r){function o(e,t){a(this,o);var n=u(this,r.call(this));return n.timeout=void 0,n.allowUnawaitedPromise=!1,n._assignFrom(e,t),n}return c(o,r),o.prototype._getAssignableProperties=function(){return[{name:"timeout",type:d},{name:"allowUnawaitedPromise",type:h}]},o}(i.default)},validations:{"factories.js":function(e,t,n){function o(r){return function(e,t){var n=typeof t;if("number"!=n)throw new r(e,n);if(isNaN(t)||!isFinite(t)||t!==Math.floor(t))throw new r(e,t)}}e.__esModule=!0,e.createIntegerValidator=o,e.createPositiveIntegerValidator=function(n){var r=o(n);return function(e,t){if(r(e,t),t<0)throw new n(e,t)}},e.createBooleanValidator=function(r){return function(e,t){var n=typeof t;if("boolean"!=n)throw new r(e,n)}},e.createSpeedValidator=function(r){return function(e,t){var n=typeof t;if("number"!=n)throw new r(e,n);if(isNaN(t)||t<.01||1<t)throw new r(e,t)}}}}}},utils:{"assignable.js":function(e,t,n){e.__esModule=!0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype._getAssignableProperties=function(){throw new Error("Not implemented")},e.prototype._assignFrom=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(e)for(var r=this._getAssignableProperties(),o=0;o<r.length;o++){for(var i=r[o],s=i.name,l=i.type,a=i.required,u=i.init,c=i.defaultValue,f=s.split("."),d=f.length-1,h=f[d],p=e,m=this,E=0;E<d&&p&&m;E++)p=p[f[E]],m=m[f[E]];if(m&&"defaultValue"in r[o]&&(m[s]=c),p&&m){var g=p[h];(void 0!==g||a)&&(t&&l&&l(s,g),m[h]=u?u(s,g,n):g)}}},e}();e.default=r,t.exports=e.default}}}}})("testcafe-release/src/client/automation/index")}(window);